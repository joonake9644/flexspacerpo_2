import{r as D,j as e}from"./react-C1G-q6RG.js";import{i as R,j as I}from"./icons-C64KHKSF.js";const W={personal:"Í∞úÏù∏",club:"ÎèôÏïÑÎ¶¨",event:"ÌñâÏÇ¨",class:"ÏàòÏóÖ"},B={yoga:"ÏöîÍ∞Ä",pilates:"ÌïÑÎùºÌÖåÏä§",fitness:"ÌîºÌä∏ÎãàÏä§",dance:"ÎåÑÏä§",badminton:"Î∞∞ÎìúÎØºÌÑ¥",pickleball:"ÌîºÌÅ¥Î≥º"},v={personal:{bg:"bg-blue-100",text:"text-blue-800",border:"border-l-4 border-blue-500"},club:{bg:"bg-yellow-100",text:"text-yellow-800",border:"border-l-4 border-yellow-500"},event:{bg:"bg-purple-100",text:"text-purple-800",border:"border-l-4 border-purple-500"},class:{bg:"bg-red-100",text:"text-red-800",border:"border-l-4 border-red-500"}},S={yoga:{bg:"bg-emerald-100",text:"text-emerald-800",border:"border-l-4 border-emerald-500"},pilates:{bg:"bg-sky-100",text:"text-sky-800",border:"border-l-4 border-sky-500"},fitness:{bg:"bg-rose-100",text:"text-rose-800",border:"border-l-4 border-rose-500"},dance:{bg:"bg-fuchsia-100",text:"text-fuchsia-800",border:"border-l-4 border-fuchsia-500"},badminton:{bg:"bg-teal-100",text:"text-teal-800",border:"border-l-4 border-teal-500"},pickleball:{bg:"bg-indigo-100",text:"text-indigo-800",border:"border-l-4 border-indigo-500"}},f=["Ïùº","Ïõî","Ìôî","Ïàò","Î™©","Í∏à","ÌÜ†"],A=({bookings:b,programs:j,view:i,setView:y})=>{const[l,C]=D.useState(new Date),[m,h]=D.useState("all"),N=D.useMemo(()=>{const s=[],t=b.filter(r=>r.status==="approved");return console.log("üìÖ DashboardCalendar ÏóÖÎç∞Ïù¥Ìä∏:",{totalBookings:b.length,approvedBookings:t.length,approvedList:t.map(r=>({id:r.id,purpose:r.purpose,userName:r.userName}))}),t.forEach(r=>{const d=new Date(r.startDate+"T00:00:00"),c=new Date(r.endDate+"T00:00:00");for(let n=new Date(d);n<=c;n.setDate(n.getDate()+1))if(!r.recurrenceRule||r.recurrenceRule.days.length===0||r.recurrenceRule.days.includes(n.getDay())){const o=n.toISOString().split("T")[0];s.push({id:`booking-${r.id}-${o}`,title:r.purpose,startTime:r.startTime,endTime:r.endTime,date:o,type:"booking",originalData:r})}}),j.forEach(r=>{const d=new Date(r.startDate+"T00:00:00"),c=new Date(r.endDate+"T00:00:00");for(let n=new Date(d);n<=c;n.setDate(n.getDate()+1))if(r.scheduleDays.includes(n.getDay())){const a=n.toISOString().split("T")[0];s.push({id:`program-${r.id}-${a}`,title:r.title,startTime:r.startTime,endTime:r.endTime,date:a,type:"program",originalData:r})}}),s.filter(r=>m==="all"?!0:r.type===m)},[b,j,m]),$=s=>{const t=new Date(l);i==="month"?t.setMonth(t.getMonth()+s):i==="week"?t.setDate(t.getDate()+s*7):i==="day"&&t.setDate(t.getDate()+s),C(t)},w=s=>{const t=new Date(s);return t.setDate(t.getDate()-t.getDay()),Array.from({length:7},(r,d)=>{const c=new Date(t);return c.setDate(c.getDate()+d),c})},T=s=>{if(s.type==="booking"){const t=s.originalData;return`[ÎåÄÍ¥Ä ÏÉÅÏÑ∏]
- Ï¢ÖÎ•ò: ${W[t.category]}${t.organization?`
- Í∏∞Í¥Ä: ${t.organization}`:""}
- Î™©Ï†Å: ${t.purpose}
- ÏãúÍ∞Ñ: ${t.startTime} - ${t.endTime}
- Ïã†Ï≤≠Ïûê: ${t.userName}`}else{const t=s.originalData;return`[ÌîÑÎ°úÍ∑∏Îû® ÏÉÅÏÑ∏]
- Ï¢ÖÎ•ò: ${B[t.category]}
- ÌîÑÎ°úÍ∑∏Îû®Î™Ö: ${t.title}
- Í∞ïÏÇ¨: ${t.instructor}
- ÏãúÍ∞Ñ: ${t.startTime} - ${t.endTime}`}},M=()=>{const s=l.getFullYear(),t=l.getMonth(),r=new Date(s,t,1),d=new Date(s,t+1,0).getDate(),c=r.getDay(),n=[];for(let a=0;a<c;a++)n.push({key:`pad-${a}`,isPadding:!0});for(let a=1;a<=d;a++){const o=`${s}-${String(t+1).padStart(2,"0")}-${String(a).padStart(2,"0")}`,g=N.filter(x=>x.date===o).sort((x,p)=>x.startTime.localeCompare(p.startTime));n.push({key:`day-${a}`,isPadding:!1,day:a,isToday:new Date(o).toDateString()===new Date().toDateString(),eventsForDay:g})}return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-7 text-center",children:f.map(a=>e.jsx("div",{className:"text-xs font-semibold text-gray-500 py-2.5",children:a},a))}),e.jsx("div",{className:"grid grid-cols-7 border-t border-l border-gray-200",style:{minHeight:"60vh"},children:n.map(a=>a.isPadding?e.jsx("div",{className:"border-r border-b border-gray-200"},a.key):e.jsxs("div",{className:`border-r border-b border-gray-200 p-2 flex flex-col ${a.isToday?"bg-blue-50":""}`,children:[e.jsx("span",{className:`text-sm font-medium text-right ${a.isToday?"text-blue-600":"text-gray-800"}`,children:a.day}),e.jsx("div",{className:"mt-1 space-y-1 overflow-y-auto",children:a.eventsForDay.map(o=>{const g=o.type==="booking"?v[o.originalData.category]||{bg:"bg-gray-100",text:"text-gray-800",border:"border-l-4 border-gray-500"}:S[o.originalData.category]||{bg:"bg-gray-100",text:"text-gray-800",border:"border-l-4 border-gray-500"};return e.jsxs("div",{className:`${g.bg} ${g.text} ${g.border} text-xs rounded p-1.5 cursor-pointer`,title:T(o),children:[e.jsx("p",{className:"font-semibold truncate",children:o.title}),e.jsxs("p",{className:"truncate",children:[o.startTime,"-",o.endTime]})]},o.id)})})]},a.key))})]})},k=s=>{const t=Array.from({length:24},(r,d)=>`${String(d).padStart(2,"0")}:00`);return e.jsxs("div",{className:"flex border-t border-gray-200",children:[e.jsxs("div",{className:"w-16 border-r border-gray-200",children:[e.jsx("div",{className:"h-12 border-b border-gray-200"}),t.map(r=>e.jsx("div",{className:"h-12 border-b border-gray-200 text-center text-xs text-gray-500 pt-1",children:r},r))]}),e.jsx("div",{className:"flex-1 grid",style:{gridTemplateColumns:`repeat(${s.length}, 1fr)`},children:s.map((r,d)=>{const c=r.toISOString().split("T")[0],n=N.filter(a=>a.date===c);return e.jsxs("div",{className:`relative ${d<s.length-1?"border-r":""} border-gray-200`,children:[t.map(a=>e.jsx("div",{className:"h-12 border-b border-gray-200"},a)),n.map(a=>{const o=a.startTime.split(":").map(Number),g=a.endTime.split(":").map(Number),x=(o[0]*60+o[1])/60*3,p=(g[0]*60+g[1]-(o[0]*60+o[1]))/60*3,u=a.type==="booking"?v[a.originalData.category]||{bg:"bg-gray-100",text:"text-gray-800",border:"border-l-4 border-gray-500"}:S[a.originalData.category]||{bg:"bg-gray-100",text:"text-gray-800",border:"border-l-4 border-gray-500"};return e.jsxs("div",{style:{top:`calc(3rem + ${x}rem)`,height:`${p}rem`},className:`absolute left-1 right-1 ${u.bg} ${u.text} ${u.border} p-2 rounded-lg text-xs overflow-hidden`,title:T(a),children:[e.jsx("p",{className:"font-bold",children:a.title}),e.jsxs("p",{children:[a.startTime,"-",a.endTime]})]},a.id)})]},d)})})]})},F=()=>{const s=w(l);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid",style:{gridTemplateColumns:"4rem 1fr"},children:[e.jsx("div",{className:"w-16"}),e.jsx("div",{className:"grid grid-cols-7 text-center",children:s.map((t,r)=>e.jsxs("div",{className:"py-2 border-b border-gray-200",children:[e.jsx("p",{className:"text-xs text-gray-500",children:f[t.getDay()]}),e.jsx("p",{className:`text-xl font-medium ${t.toDateString()===new Date().toDateString()?"text-blue-600":"text-gray-800"}`,children:t.getDate()})]},r))})]}),k(s)]})},E=()=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid",style:{gridTemplateColumns:"4rem 1fr"},children:[e.jsx("div",{className:"w-16"}),e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"py-2 border-b border-gray-200",children:[e.jsx("p",{className:"text-xs text-gray-500",children:f[l.getDay()]}),e.jsx("p",{className:`text-xl font-medium ${l.toDateString()===new Date().toDateString()?"text-blue-600":"text-gray-800"}`,children:l.getDate()})]})})]}),k([l])]}),O=()=>{const s=l.getFullYear(),t=l.getMonth();if(i==="month")return`${s}ÎÖÑ ${t+1}Ïõî`;if(i==="week"){const r=w(l);return`${s}ÎÖÑ ${t+1}Ïõî ${r[0].getDate()}Ïùº - ${r[6].getDate()}Ïùº`}return`${s}ÎÖÑ ${t+1}Ïõî ${l.getDate()}Ïùº`};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between mb-4 gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>$(-1),"aria-label":"Ïù¥Ï†Ñ",className:"p-2 rounded-full hover:bg-gray-100 transition-colors",children:e.jsx(R,{className:"w-5 h-5 text-gray-600"})}),e.jsx("h3",{className:"text-lg font-bold text-gray-900 w-40 sm:w-52 text-center",children:O()}),e.jsx("button",{onClick:()=>$(1),"aria-label":"Îã§Ïùå",className:"p-2 rounded-full hover:bg-gray-100 transition-colors",children:e.jsx(I,{className:"w-5 h-5 text-gray-600"})})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center bg-gray-100 p-1 rounded-xl",children:[e.jsx("button",{onClick:()=>h("all"),className:`px-4 py-2 text-sm font-medium rounded-lg transition-colors ${m==="all"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:bg-white/60"}`,children:"Ï†ÑÏ≤¥"}),e.jsx("button",{onClick:()=>h("booking"),className:`px-4 py-2 text-sm font-medium rounded-lg transition-colors ${m==="booking"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:bg-white/60"}`,children:"ÎåÄÍ¥Ä"}),e.jsx("button",{onClick:()=>h("program"),className:`px-4 py-2 text-sm font-medium rounded-lg transition-colors ${m==="program"?"bg-white text-emerald-600 shadow-sm":"text-gray-600 hover:bg-white/60"}`,children:"ÌîÑÎ°úÍ∑∏Îû®"})]}),e.jsxs("div",{className:"flex items-center bg-gray-100 p-1 rounded-xl",children:[e.jsx("button",{onClick:()=>y("month"),className:`px-4 py-2 text-sm font-medium rounded-lg transition-colors ${i==="month"?"bg-white text-blue-600 shadow-sm":"text-gray-600"}`,children:"Ïõî"}),e.jsx("button",{onClick:()=>y("week"),className:`px-4 py-2 text-sm font-medium rounded-lg transition-colors ${i==="week"?"bg-white text-blue-600 shadow-sm":"text-gray-600"}`,children:"Ï£º"}),e.jsx("button",{onClick:()=>y("day"),className:`px-4 py-2 text-sm font-medium rounded-lg transition-colors ${i==="day"?"bg-white text-blue-600 shadow-sm":"text-gray-600"}`,children:"Ïùº"})]})]})]}),i==="month"&&M(),i==="week"&&F(),i==="day"&&E()]})};export{A as default};
