import{r as l,j as e}from"./react-C1G-q6RG.js";import{u as R}from"./firebase-C3mMOVup.js";import{a as A}from"./index-BAncqK-u.js";import{U,b as _,M as h,P as z,L as g}from"./icons-CN_tAE-L.js";const I=({email:i,setEmail:d,onSendLink:x,onCancel:r})=>e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",role:"dialog","aria-modal":"true","aria-labelledby":"forgot-password-title",children:e.jsxs("div",{className:"bg-white rounded-2xl p-8 max-w-md w-full mx-4",children:[e.jsx("h3",{id:"forgot-password-title",className:"text-xl font-bold text-gray-900 mb-2",children:"비밀번호 재설정 / Password Reset"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"가입 시 사용한 이메일 주소를 입력하세요. 재설정 링크를 보내드립니다."}),e.jsxs("div",{className:"relative mb-4",children:[e.jsx(h,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"email",placeholder:"이메일 / Email","aria-label":"Email for password reset",value:i,onChange:c=>d(c.target.value),required:!0,className:"w-full py-3 pl-12 pr-4 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors hover:border-blue-400"})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:r,className:"flex-1 py-3 px-4 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 hover:border-gray-400 transition-all font-medium",children:"취소"}),e.jsx("button",{onClick:x,className:"flex-1 py-3 px-4 bg-blue-500 text-white rounded-xl border-2 border-transparent hover:bg-blue-600 hover:border-blue-700 transition-all font-medium",children:"재설정 링크 보내기"})]})]})}),T=({onConfirm:i,onCancel:d})=>e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",role:"dialog","aria-modal":"true","aria-labelledby":"agreement-title",children:e.jsxs("div",{className:"bg-white rounded-2xl p-8 max-w-2xl w-full mx-4",children:[e.jsx("h3",{id:"agreement-title",className:"text-xl font-bold text-gray-900 mb-4",children:"개인정보 수집 및 이용 동의"}),e.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"FlexSpace Pro 서비스 제공을 위해 아래와 같이 개인정보를 수집 및 이용합니다."}),e.jsx("div",{className:"overflow-x-auto border border-gray-200 rounded-lg",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-sm",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left font-semibold text-gray-700",children:"구분"}),e.jsx("th",{className:"px-4 py-2 text-left font-semibold text-gray-700",children:"수집 항목"}),e.jsx("th",{className:"px-4 py-2 text-left font-semibold text-gray-700",children:"수집 및 이용 목적"}),e.jsx("th",{className:"px-4 py-2 text-left font-semibold text-gray-700",children:"보유 및 이용 기간"})]})}),e.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-3 font-medium text-gray-900",children:"필수"}),e.jsx("td",{className:"px-4 py-3",children:"이름, 이메일"}),e.jsx("td",{className:"px-4 py-3",children:"회원 식별 및 관리, 서비스 제공 및 공지사항 전달"}),e.jsx("td",{className:"px-4 py-3",children:"회원 탈퇴 시까지"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-3 font-medium text-gray-900",children:"선택"}),e.jsx("td",{className:"px-4 py-3",children:"전화번호"}),e.jsx("td",{className:"px-4 py-3",children:"체육관 대관 시 긴급 연락 및 알림"}),e.jsx("td",{className:"px-4 py-3",children:"회원 탈퇴 시까지"})]})]})]})}),e.jsx("p",{className:"text-xs text-gray-500 mt-4",children:"※ 선택 항목을 동의하지 않아도 회원가입 및 기본 서비스 이용이 가능합니다. 단, 해당 정보가 필요한 일부 서비스(예: 대관 알림) 이용에 제한이 있을 수 있습니다."}),e.jsx("p",{className:"text-xs text-gray-600 mt-2 font-medium",children:"필수 항목에 동의하지 않으면 회원가입이 제한됩니다."}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[e.jsx("button",{onClick:d,className:"px-4 py-2 rounded-xl border",children:"취소"}),e.jsx("button",{onClick:i,className:"px-4 py-2 rounded-xl bg-blue-600 text-white",children:"동의하고 계속하기"})]})]})}),J=({onLogin:i,onSignup:d,onAdminLogin:x})=>{const[r,c]=l.useState("login"),[f,P]=l.useState(""),[a,y]=l.useState(""),[o,j]=l.useState(""),[N,S]=l.useState(""),[v,k]=l.useState(""),[E,m]=l.useState(!1),[M,b]=l.useState(!1),[p,w]=l.useState(""),[F,u]=l.useState(!1),[C,n]=l.useState(""),$=async()=>{p&&(await R(A,p),b(!1))},q=async()=>{const s=v.replace(/-/g,"");u(!0),n("");try{await d({name:f,email:a,password:o,phone:s})?m(!1):n("회원가입에 실패했습니다. 입력 정보를 확인해주세요.")}finally{u(!1)}},L=async s=>{s.preventDefault(),n(""),u(!0);try{if(r==="login")await i(a,o)||n("로그인에 실패했습니다. 이메일/비밀번호를 확인해주세요.");else if(r==="admin_login")await x(a,o)||n("관리자 로그인에 실패했습니다. 자격을 확인해주세요.");else{if(o!==N){n("비밀번호가 일치하지 않습니다.");return}m(!0)}}finally{u(!1)}},O=s=>{const t=s.replace(/[^0-9]/g,"");return t.length<=3?t:t.length<=7?`${t.slice(0,3)}-${t.slice(3)}`:`${t.slice(0,3)}-${t.slice(3,7)}-${t.slice(7,11)}`};return e.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 p-4",children:[e.jsxs("div",{className:"w-full max-w-md bg-white rounded-2xl shadow-sm border border-gray-100 p-8",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-500 rounded-xl flex items-center justify-center mr-2",children:e.jsx(U,{className:"w-6 h-6 text-white"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"FlexSpace Pro"})]}),e.jsxs("div",{className:"flex gap-2 mb-6",children:[e.jsx("button",{type:"button",onClick:()=>c("login"),className:`flex-1 py-2 rounded-xl border ${r==="login"?"bg-blue-50 text-blue-700 border-blue-200":"bg-white"}`,children:"로그인"}),e.jsx("button",{type:"button",onClick:()=>c("signup"),className:`flex-1 py-2 rounded-xl border ${r==="signup"?"bg-purple-50 text-purple-700 border-purple-200":"bg-white"}`,children:"회원가입"}),e.jsx("button",{type:"button",onClick:()=>c("admin_login"),className:`flex-1 py-2 rounded-xl border ${r==="admin_login"?"bg-green-50 text-green-700 border-green-200":"bg-white"}`,children:"관리자"})]}),e.jsxs("form",{onSubmit:L,children:[r==="signup"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative mb-4",children:[e.jsx(_,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"이름 / Name",value:f,onChange:s=>P(s.target.value),required:!0,className:"w-full py-3 pl-12 pr-4 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors hover:border-blue-400"})]}),e.jsxs("div",{className:"relative mb-4",children:[e.jsx(h,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"email",placeholder:"이메일 / Email",value:a,onChange:s=>y(s.target.value),required:!0,className:"w-full py-3 pl-12 pr-4 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors hover:border-blue-400"})]}),e.jsxs("div",{className:"relative mb-4",children:[e.jsx(z,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"tel",placeholder:"전화번호 (선택) / Phone (Optional)",value:v,onChange:s=>k(O(s.target.value)),maxLength:13,className:"w-full py-3 pl-12 pr-4 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors hover:border-blue-400"})]}),e.jsxs("div",{className:"relative mb-4",children:[e.jsx(g,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"password",placeholder:"비밀번호 / Password",value:o,onChange:s=>j(s.target.value),required:!0,className:"w-full py-3 pl-12 pr-4 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors hover:border-blue-400"})]}),e.jsxs("div",{className:"relative mb-6",children:[e.jsx(g,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"password",placeholder:"비밀번호 확인 / Confirm Password",value:N,onChange:s=>S(s.target.value),required:!0,className:"w-full py-3 pl-12 pr-4 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors hover:border-blue-400"})]})]}),r!=="signup"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative mb-4",children:[e.jsx(h,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"email",placeholder:"이메일 / Email",value:a,onChange:s=>y(s.target.value),required:!0,className:"w-full py-3 pl-12 pr-4 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors hover:border-blue-400"})]}),e.jsxs("div",{className:"relative mb-2",children:[e.jsx(g,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"password",placeholder:"비밀번호 / Password",value:o,onChange:s=>j(s.target.value),required:!0,className:"w-full py-3 pl-12 pr-4 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors hover:border-blue-400"})]}),r==="login"&&e.jsx("div",{className:"text-right mb-4",children:e.jsx("button",{type:"button",className:"text-sm text-blue-600 hover:underline",onClick:()=>{b(!0),w(a)},children:"비밀번호 재설정"})})]}),C&&e.jsx("p",{className:"text-sm text-red-600 mb-3",children:C}),e.jsxs("button",{type:"submit",disabled:F,className:"w-full py-3 px-4 bg-blue-500 text-white rounded-xl border-2 border-transparent hover:bg-blue-600 hover:border-blue-700 transition-all font-semibold",children:[r==="login"&&"로그인 / Login",r==="signup"&&"회원가입 / Sign Up",r==="admin_login"&&"관리자 로그인 / Admin Login"]})]})]}),E&&e.jsx(T,{onConfirm:q,onCancel:()=>m(!1)}),M&&e.jsx(I,{email:p,setEmail:w,onSendLink:$,onCancel:()=>b(!1)})]})};export{J as default};
