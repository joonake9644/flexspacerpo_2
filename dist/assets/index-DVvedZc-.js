const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./DashboardCalendar-CnKiYDlW.js","./react-C1G-q6RG.js","./icons-0lFz5iDe.js"])))=>i.map(i=>d[i]);
import{r as l,j as e,R as yt,a as jt}from"./react-C1G-q6RG.js";import{g as Qe,i as wt,a as ct,b as vt,c as Nt,d as Dt,e as Ct,f as kt,h as St,j as Et,k as Tt,l as At,o as Pt,s as Ze,m as _e,n as ae,p as Me,q as Se,r as $t,u as Je,t as fe,v as re,G as _t,w as Mt,x as Ee,y as ye,z as Be,A as He,B as It,C as Ge,R as Ot,D as Lt,E as Rt,F as Ft,H as Vt,I as Bt,J as Ht,K as zt}from"./firebase-DnP1Uaxu.js";import{U as ne,a as qt,M as qe,P as Gt,L as ze,H as Ue,C as se,B as he,S as et,b as tt,X as dt,c as Kt,d as Wt,e as xe,f as Xt,g as Yt,h as Qt,i as Zt,j as Jt,k as mt,l as Ut,m as Ke,T as We,n as Xe,o as es,A as ts,I as ss,p as rs,q as as,r as ns}from"./icons-0lFz5iDe.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))x(d);new MutationObserver(d=>{for(const m of d)if(m.type==="childList")for(const i of m.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&x(i)}).observe(document,{childList:!0,subtree:!0});function c(d){const m={};return d.integrity&&(m.integrity=d.integrity),d.referrerPolicy&&(m.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?m.credentials="include":d.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function x(d){if(d.ep)return;d.ep=!0;const m=c(d);fetch(d.href,m)}})();const Te={};console.log("Firebase Config Debug:",{hasApiKey:!0,hasAuthDomain:!0,hasProjectId:!0,NODE_ENV:"production"});const ls={apiKey:"AIzaSyBvlPy3BOyrRCokGAHkzuX6IoVZNjWTU-0",authDomain:"flexspaceprowin.firebaseapp.com",projectId:"flexspaceprowin",storageBucket:"flexspaceprowin.firebasestorage.app",messagingSenderId:"545144229496",appId:"1:545144229496:web:a833b961cf4b8a7ce9678d",measurementId:"G-D81Q76VKZQ"};let we;try{we=Qe().length?Qe()[0]:wt(ls),console.log("Firebase initialized successfully")}catch(t){throw console.error("Firebase initialization failed:",t),t}const G=ct(we),Y=vt(we),ut=Nt(we),Ae=Dt(we),is=Te?.VITE_USE_EMULATOR==="true";if(is){const t=Te?.VITE_EMULATOR_HOST||"127.0.0.1",s=Number(Te?.VITE_EMULATOR_AUTH_PORT||9099),c=Number(Te?.VITE_EMULATOR_FIRESTORE_PORT||8080),x=Number(Te?.VITE_EMULATOR_STORAGE_PORT||9199);try{Ct(G,`http://${t}:${s}`,{disableWarnings:!0})}catch{}try{kt(Y,t,c)}catch{}try{St(ut,t,x)}catch{}try{Et(Ae,t,5001)}catch{}}Tt().then(t=>t?At(we):null).catch(()=>null);const ie=Object.freeze(Object.defineProperty({__proto__:null,auth:G,db:Y,functions:Ae,storage:ut},Symbol.toStringTag,{value:"Module"})),os=()=>{const[t,s]=l.useState(null),[c,x]=l.useState(!1),[d,m]=l.useState(!0);l.useEffect(()=>{m(!0);const n=Pt(G,async a=>{try{if(!a){s(null),x(!1);return}x(a.emailVerified);const o=ae(Y,"users",a.uid),h=await _e(o);let v="user",k=a.displayName||(a.email?.split("@")[0]??"user"),R;if(h.exists()){const b=h.data();v=b.role||"user",k=b.name||k,R=b.phone}else{const b={name:k,email:a.email??"",phone:null,role:"user",isActive:!0,createdAt:re(),updatedAt:re()};await fe(o,b),console.log("새 사용자 정보를 users 컬렉션에 추가:",a.uid)}s({id:a.uid,name:k,email:a.email??"",phone:R,role:v})}catch(o){console.error("Auth state change error:",o),a&&s({id:a.uid,name:a.email?.split("@")[0]??"user",email:a.email??"",role:"user"})}finally{m(!1)}});return()=>n()},[]);const i=l.useCallback(async(n,a)=>{try{const o=await Ze(G,n,a),h=await _e(ae(Y,"users",o.user.uid)),k=(h.exists()?h.data():null)?.adminCreated===!0,R=n==="admin@flexspace.test"||n==="flexadmin@test.com"||n==="joonake@naver.com"||n==="uu@naver.com"||n==="kan@naver.com"||n==="kun6@naver.com"||n==="testuser964419@gmail.com";if(!o.user.emailVerified&&!k&&!R){try{await Me(o.user,{url:`${window.location.origin}/`,handleCodeInApp:!1})}catch(b){console.warn("이메일 인증 재전송 실패:",b)}throw await Se(G),new Error("이메일 인증이 필요합니다. 새로운 인증 메일을 발송했습니다. 이메일함을 확인해주세요.")}return!0}catch(o){throw console.error("Login error:",o),o}},[]),f=l.useCallback(async(n,a)=>{try{const o=await Ze(G,n,a);if(!(n==="admin@flexspace.test"||n==="flexadmin@test.com"||n==="joonake@naver.com"||n==="uu@naver.com"||n==="kan@naver.com"||n==="kun6@naver.com"||n==="testuser964419@gmail.com")&&!o.user.emailVerified){try{await Me(o.user,{url:`${window.location.origin}/`,handleCodeInApp:!1})}catch(O){console.warn("관리자 이메일 인증 재전송 실패:",O)}throw await Se(G),new Error("이메일 인증이 필요합니다. 새로운 인증 메일을 발송했습니다. 이메일함을 확인해주세요.")}const v=ae(Y,"users",o.user.uid),k=await _e(v),R=k.exists()?k.data():{},b=R.role;if(console.log("Admin login - User data:",{uid:o.user.uid,email:o.user.email,firestoreExists:k.exists(),role:b,allData:R}),b!=="admin")throw await Se(G),new Error(`관리자 권한이 없습니다. 현재 권한: ${b||"없음"}`);return!0}catch(o){throw console.error("Admin login error:",o),o}},[]),D=l.useCallback(async n=>{try{const{name:a,email:o,phone:h,password:v}=n;if(!o||!v)throw new Error("이메일과 비밀번호가 필요합니다.");if(v.length<6)throw new Error("비밀번호는 6자 이상이어야 합니다.");const k=await $t(G,o,v);await Je(k.user,{displayName:a||o.split("@")[0]});const R=ae(Y,"users",k.user.uid);await fe(R,{name:a||(o.split("@")[0]??"user"),email:o,phone:h||null,role:"user",isActive:!0,createdAt:re(),updatedAt:re()},{merge:!0});try{await Me(k.user,{url:`${window.location.origin}/`,handleCodeInApp:!1}),console.log("이메일 인증 메일 전송 성공:",o)}catch(b){console.warn("이메일 인증 메일 전송 실패:",b)}return await Se(G),!0}catch(a){throw console.error("Signup error:",a),a}},[]),p=l.useCallback(async()=>{try{const n=new _t;n.addScope("email"),n.addScope("profile"),n.setCustomParameters({prompt:"select_account"});const o=(await Mt(G,n)).user;if(console.log("Google login success:",{uid:o.uid,email:o.email,displayName:o.displayName,emailVerified:o.emailVerified}),!o.email)throw new Error("Google 계정에서 이메일 정보를 가져올 수 없습니다.");const h=ae(Y,"users",o.uid);let v={name:o.displayName||o.email.split("@")[0]||"user",email:o.email,phone:o.phoneNumber||null,role:"user",isActive:!0,updatedAt:re()};try{(await _e(h)).exists()?(await fe(h,v,{merge:!0}),console.log("Google 로그인: 기존 사용자 정보 업데이트됨:",o.uid)):(await fe(h,{...v,createdAt:re()}),console.log("Google 로그인: 새 사용자 정보 저장됨:",o.uid))}catch(k){console.warn("Firestore 저장 실패, 하지만 로그인은 계속 진행:",k)}return!0}catch(n){throw console.error("Google login error:",n),n.code==="auth/popup-closed-by-user"||n.code==="auth/cancelled-popup-request"?new Error("Google 로그인이 취소되었습니다."):n.code==="auth/popup-blocked"?new Error("팝업이 차단되었습니다. 브라우저 설정에서 팝업을 허용해주세요."):n.code==="auth/network-request-failed"?new Error("네트워크 연결을 확인해주세요."):new Error(`Google 로그인 실패: ${n.message||"알 수 없는 오류"}`)}},[]),N=l.useCallback(async()=>{if(G.currentUser)return await Me(G.currentUser),!0;throw new Error("로그인이 필요합니다.")},[]),u=l.useCallback(async(n,a)=>{if(G.currentUser){await Je(G.currentUser,{displayName:n,photoURL:a});const o=ae(Y,"users",G.currentUser.uid);return await fe(o,{name:n||G.currentUser.displayName,updatedAt:re()},{merge:!0}),!0}throw new Error("로그인이 필요합니다.")},[]),y=l.useCallback(async()=>{await Se(G),s(null),x(!1)},[]);return l.useMemo(()=>({user:t,login:i,logout:y,signup:D,adminLogin:f,googleLogin:p,sendVerificationEmail:N,updateUserProfile:u,emailVerified:c,loading:d}),[t,i,y,D,f,p,N,u,c,d])},Pe=()=>{const[t,s]=l.useState(!0),[c,x]=l.useState(!1),[d,m]=l.useState(null),i=l.useRef(null),f=l.useRef(null),D=l.useRef({}),[p,N]=l.useState([]),[u,y]=l.useState([]),[n,a]=l.useState([]),[o,h]=l.useState([]),[v,k]=l.useState([]),R=l.useCallback(()=>{x(!0),m(null),i.current&&clearTimeout(i.current),i.current=setTimeout(()=>{x(!1)},800)},[]),b=l.useCallback((S,T)=>{console.error(`Connection error for ${S}:`,T);const _=3,A=D.current[S]||0;if(A<_){D.current[S]=A+1,m(`${S} 연결 재시도 중... (${A+1}/${_})`);const E=Math.pow(2,A)*1e3;f.current=setTimeout(()=>{console.log(`Retrying connection for ${S} in ${E}ms`)},E)}else m(`${S} 연결 실패: 최대 재시도 횟수 초과`)},[]),O=l.useCallback(S=>{D.current[S]&&(console.log(`Connection restored for ${S}`),D.current[S]=0)},[]);return l.useEffect(()=>{const S=[];let T=0;const _=5,A=()=>{T++,T>=_&&(s(!1),console.log("모든 Firestore 컬렉션 초기 로딩 완료"))},E=(g,C,M)=>({onNext:q=>{O(g);const H=q.docs.map(P=>({id:P.id,...P.data()}));C(P=>{P.length>0&&R();const I=M?M(H):H;return console.log(`${g} 데이터 업데이트:`,{previousCount:P.length,newCount:I.length,hasChanges:P.length!==I.length}),I}),A()},onError:q=>{b(g,q),A()}}),V=E("users",h);S.push(Ee(ye(Y,"users"),V.onNext,V.onError));const w=E("bookings",N,g=>g.filter((M,q,H)=>q===H.findIndex(P=>P.id===M.id)).sort((M,q)=>{const H=M.createdAt?.toDate?.()||new Date(0);return(q.createdAt?.toDate?.()||new Date(0)).getTime()-H.getTime()}));S.push(Ee(Be(ye(Y,"bookings"),He("createdAt","desc")),w.onNext,w.onError));const B=E("programs",y);S.push(Ee(Be(ye(Y,"programs"),He("startDate","asc")),B.onNext,B.onError));const U=E("applications",a,g=>g.sort((C,M)=>{const q=C.appliedAt?.toDate?.()||new Date(0);return(M.appliedAt?.toDate?.()||new Date(0)).getTime()-q.getTime()}));S.push(Ee(Be(ye(Y,"program_applications"),He("appliedAt","desc")),U.onNext,U.onError));const r=E("facilities",k);return S.push(Ee(ye(Y,"facilities"),r.onNext,r.onError)),()=>{console.log("Firestore 구독 정리 중..."),S.forEach(g=>g()),i.current&&clearTimeout(i.current),f.current&&clearTimeout(f.current),D.current={}}},[]),l.useMemo(()=>({loading:t,syncing:c,connectionError:d,bookings:p,setBookings:N,programs:u,setPrograms:y,applications:n,setApplications:a,users:o,setUsers:h,facilities:v,isDataReady:!t&&!d,hasActiveError:!!d,debugInfo:{loadedCollections:{users:o.length,bookings:p.length,programs:u.length,applications:n.length,facilities:v.length},retryStatus:D.current}}),[t,c,d,p,u,n,o,v])},st=t=>{const s=t.replace(/\D/g,"");return s.length<=3?s:s.length<=7?`${s.slice(0,3)}-${s.slice(3)}`:`${s.slice(0,3)}-${s.slice(3,7)}-${s.slice(7,11)}`},rt=t=>({"auth/user-not-found":"미가입자입니다. 회원가입을 해주세요.","auth/wrong-password":"비밀번호가 일치하지 않습니다.","auth/email-already-in-use":"이미 사용 중인 이메일입니다.","auth/weak-password":"비밀번호가 너무 간단합니다. 6자 이상 입력해주세요.","auth/invalid-email":"올바른 이메일 형식이 아닙니다.","auth/invalid-credential":"이메일 또는 비밀번호가 잘못되었습니다. 미가입자는 회원가입을 먼저 해주세요.","auth/invalid-login-credentials":"로그인 정보가 잘못되었습니다. 미가입자는 회원가입을 먼저 해주세요.","auth/too-many-requests":"로그인 시도가 너무 많습니다. 잠시 후 다시 시도하거나 브라우저 캐시를 삭제해 주세요.","firestore/permission-denied":"접근 권한이 없습니다.","firestore/unavailable":"서비스가 일시적으로 사용 불가합니다.","firestore/deadline-exceeded":"요청 시간이 초과되었습니다.","storage/unauthorized":"파일 업로드 권한이 없습니다.","storage/object-not-found":"파일을 찾을 수 없습니다.","storage/quota-exceeded":"저장소 용량이 초과되었습니다.","functions/permission-denied":"함수 실행 권한이 없습니다.","functions/unavailable":"서버 함수가 일시적으로 사용 불가합니다."})[t]||"로그인에 실패했습니다. 이메일/비밀번호를 확인하거나 회원가입을 먼저 진행해주세요.",je=t=>{const s=t instanceof Error?t.message:String(t),c=s.match(/auth\/([\w-]+)/);return c&&c[0]?rt(c[0]):rt(s)},xt=l.createContext(void 0),cs=({children:t})=>{const[s,c]=l.useState([]),x=l.useCallback(m=>{c(i=>i.filter(f=>f.id!==m))},[]),d=l.useCallback((m,i="info",f=5e3)=>{const D=Date.now();window.lastNotifications||(window.lastNotifications={});const p=window.lastNotifications[m]||0;if(D-p<1e3){console.log("중복 알림 차단:",m);return}window.lastNotifications[m]=D;const N=`notification-${D}-${Math.random()}`,u={id:N,message:m,type:i,duration:f};c(y=>i==="success"||i==="error"?[u]:[...y.slice(-2),u]),f>0&&setTimeout(()=>{x(N)},f)},[x]);return e.jsx(xt.Provider,{value:{notifications:s,showNotification:d,removeNotification:x},children:t})},$e=()=>{const t=l.useContext(xt);if(t===void 0)throw new Error("useNotification must be used within a NotificationProvider");return t},ds=({email:t,setEmail:s,onSendLink:c,onCancel:x,submitting:d})=>e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",role:"dialog","aria-modal":"true","aria-labelledby":"forgot-password-title",children:e.jsxs("div",{className:"bg-white rounded-2xl p-8 max-w-md w-full mx-4",children:[e.jsx("h3",{id:"forgot-password-title",className:"text-xl font-bold text-gray-900 mb-2",children:"비밀번호 재설정 / Password Reset"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"가입 시 사용한 이메일 주소를 입력하세요. 재설정 링크를 보내드립니다."}),e.jsxs("div",{className:"relative mb-4",children:[e.jsx(qe,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"email",placeholder:"이메일 / Email","aria-label":"Email for password reset",value:t,onChange:m=>s(m.target.value),required:!0,className:"w-full py-3 pl-12 pr-4 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors hover:border-blue-400"})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:x,className:"flex-1 py-3 px-4 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 hover:border-gray-400 transition-all font-medium",children:"취소"}),e.jsx("button",{onClick:c,disabled:d,className:"flex-1 py-3 px-4 bg-blue-500 text-white rounded-xl border-2 border-transparent hover:bg-blue-600 hover:border-blue-700 transition-all font-medium",children:d?"전송 중...":"재설정 링크 보내기"})]})]})}),ms=({onConfirm:t,onCancel:s,errorText:c})=>e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",role:"dialog","aria-modal":"true","aria-labelledby":"agreement-title",children:e.jsxs("div",{className:"bg-white rounded-2xl p-8 max-w-2xl w-full mx-4",children:[e.jsx("h3",{id:"agreement-title",className:"text-xl font-bold text-gray-900 mb-4",children:"개인정보 수집 및 이용 동의"}),e.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"FlexSpace Pro 서비스 제공을 위해 아래와 같이 개인정보를 수집 및 이용합니다."}),e.jsx("div",{className:"overflow-x-auto border border-gray-200 rounded-lg",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-sm",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left font-semibold text-gray-700",children:"구분"}),e.jsx("th",{className:"px-4 py-2 text-left font-semibold text-gray-700",children:"수집 항목"}),e.jsx("th",{className:"px-4 py-2 text-left font-semibold text-gray-700",children:"수집 및 이용 목적"}),e.jsx("th",{className:"px-4 py-2 text-left font-semibold text-gray-700",children:"보유 및 이용 기간"})]})}),e.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-3 font-medium text-gray-900",children:"필수"}),e.jsx("td",{className:"px-4 py-3",children:"이름, 이메일"}),e.jsx("td",{className:"px-4 py-3",children:"회원 식별 및 관리, 서비스 제공 및 공지사항 전달"}),e.jsx("td",{className:"px-4 py-3",children:"회원 탈퇴 시까지"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-3 font-medium text-gray-900",children:"선택"}),e.jsx("td",{className:"px-4 py-3",children:"전화번호"}),e.jsx("td",{className:"px-4 py-3",children:"체육관 대관 시 긴급 연락 및 알림"}),e.jsx("td",{className:"px-4 py-3",children:"회원 탈퇴 시까지"})]})]})]})}),e.jsx("p",{className:"text-xs text-gray-500 mt-4",children:"※ 선택 항목을 동의하지 않아도 회원가입 및 기본 서비스 이용이 가능합니다. 단, 해당 정보가 필요한 일부 서비스(예: 대관 알림) 이용에 제한이 있을 수 있습니다."}),e.jsx("p",{className:"text-xs text-gray-600 mt-2 font-medium",children:"필수 항목에 동의하지 않으면 회원가입이 제한됩니다."}),c&&e.jsx("p",{className:"text-sm text-red-600 mt-4 text-right",children:c}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[e.jsx("button",{onClick:s,className:"px-4 py-2 rounded-xl border",children:"취소"}),e.jsx("button",{onClick:t,className:"px-4 py-2 rounded-xl bg-blue-600 text-white",children:"동의하고 계속하기"})]})]})}),us=({onLogin:t,onSignup:s,onAdminLogin:c,onGoogleLogin:x})=>{const{showNotification:d}=$e(),[m,i]=l.useState("login"),[f,D]=l.useState(""),[p,N]=l.useState(""),[u,y]=l.useState(""),[n,a]=l.useState(""),[o,h]=l.useState(""),[v,k]=l.useState(!1),[R,b]=l.useState(!1),[O,S]=l.useState(""),[T,_]=l.useState(!1),[A,E]=l.useState(""),V=async()=>{if(!O){d("이메일을 입력해주세요.","error");return}_(!0);try{await It(G,O),d("비밀번호 재설정 이메일을 보냈습니다. 이메일 함을 확인해주세요.","success"),b(!1)}catch(r){const g=je(r);d(g,"error")}finally{_(!1)}},w=async()=>{const r=o.replace(/-/g,"");_(!0),E("");try{const[g,C]=await s({name:f,email:p,password:u,phone:r});g?(k(!1),d(C||"회원가입이 완료되었습니다. 이메일 인증을 확인해주세요.","success"),i("login"),y(""),a("")):E(C||"회원가입에 실패했습니다. 입력 정보를 확인해주세요.")}finally{_(!1)}},B=async r=>{if(r.preventDefault(),m==="signup"){if(!f.trim()){d("이름을 입력해주세요.","error");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(p)){d("유효하지 않은 이메일 형식입니다.","error");return}if(u.length<6){d("비밀번호는 6자 이상이어야 합니다.","error");return}if(u!==n){d("비밀번호가 일치하지 않습니다.","error");return}}if(m!=="signup"){if(!p.trim()){d("이메일을 입력해주세요.","error");return}if(!u.trim()){d("비밀번호를 입력해주세요.","error");return}}_(!0);try{if(m==="login"){const[g,C]=await t(p,u);g?d("로그인에 성공했습니다.","success"):(d(C||"로그인에 실패했습니다. 이메일/비밀번호를 확인해주세요.","error"),C&&(C.includes("미가입자")||C.includes("회원가입을 먼저"))&&setTimeout(()=>{i("signup"),d("회원가입 페이지로 이동합니다.","info")},2e3))}else if(m==="admin_login"){const[g,C]=await c(p,u);g?d("관리자로 로그인되었습니다.","success"):d(C||"관리자 로그인에 실패했습니다. 자격을 확인해주세요.","error")}else k(!0)}finally{_(!1)}},U=r=>{const g=r.replace(/[^0-9]/g,"");return g.length<=3?g:g.length<=7?`${g.slice(0,3)}-${g.slice(3)}`:`${g.slice(0,3)}-${g.slice(3,7)}-${g.slice(7,11)}`};return e.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 p-4",children:[e.jsxs("div",{className:"w-full max-w-md bg-white rounded-2xl shadow-sm border border-gray-100 p-8",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-500 rounded-xl flex items-center justify-center mr-2",children:e.jsx(ne,{className:"w-6 h-6 text-white"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"FlexSpace Pro"})]}),e.jsxs("div",{className:"flex gap-2 mb-6",children:[e.jsx("button",{type:"button",onClick:()=>i("login"),className:`flex-1 py-2 rounded-xl border ${m==="login"?"bg-blue-50 text-blue-700 border-blue-200":"bg-white"}`,children:"로그인"}),e.jsx("button",{type:"button",onClick:()=>i("signup"),className:`flex-1 py-2 rounded-xl border ${m==="signup"?"bg-purple-50 text-purple-700 border-purple-200":"bg-white"}`,children:"회원가입"}),e.jsx("button",{type:"button",onClick:()=>i("admin_login"),className:`flex-1 py-2 rounded-xl border ${m==="admin_login"?"bg-green-50 text-green-700 border-green-200":"bg-white"}`,children:"관리자"})]}),e.jsxs("form",{onSubmit:B,children:[m==="signup"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative mb-4",children:[e.jsx(qt,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"이름 / Name",value:f,onChange:r=>D(r.target.value),required:!0,className:"w-full py-3 pl-12 pr-4 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors hover:border-blue-400"})]}),e.jsxs("div",{className:"relative mb-4",children:[e.jsx(qe,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"email",placeholder:"이메일 / Email",value:p,onChange:r=>N(r.target.value),required:!0,className:"w-full py-3 pl-12 pr-4 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors hover:border-blue-400"})]}),e.jsxs("div",{className:"relative mb-4",children:[e.jsx(Gt,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"tel",placeholder:"전화번호 (선택) / Phone (Optional)",value:o,onChange:r=>h(U(r.target.value)),maxLength:13,className:"w-full py-3 pl-12 pr-4 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors hover:border-blue-400"})]}),e.jsxs("div",{className:"relative mb-4",children:[e.jsx(ze,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"password",placeholder:"비밀번호 / Password",value:u,onChange:r=>y(r.target.value),required:!0,className:"w-full py-3 pl-12 pr-4 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors hover:border-blue-400"})]}),e.jsxs("div",{className:"relative mb-6",children:[e.jsx(ze,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"password",placeholder:"비밀번호 확인 / Confirm Password",value:n,onChange:r=>a(r.target.value),required:!0,className:"w-full py-3 pl-12 pr-4 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors hover:border-blue-400"})]})]}),m!=="signup"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative mb-4",children:[e.jsx(qe,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"email",placeholder:"이메일 / Email",value:p,onChange:r=>N(r.target.value),required:!0,className:"w-full py-3 pl-12 pr-4 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors hover:border-blue-400"})]}),e.jsxs("div",{className:"relative mb-2",children:[e.jsx(ze,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"password",placeholder:"비밀번호 / Password",value:u,onChange:r=>y(r.target.value),required:!0,className:"w-full py-3 pl-12 pr-4 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors hover:border-blue-400"})]}),m==="login"&&e.jsx("div",{className:"text-right mb-4",children:e.jsx("button",{type:"button",className:"text-sm text-blue-600 hover:underline",onClick:()=>{b(!0),S(p)},children:"비밀번호 재설정"})})]}),e.jsxs("button",{type:"submit",disabled:T,className:"w-full py-3 px-4 bg-blue-500 text-white rounded-xl border-2 border-transparent hover:bg-blue-600 hover:border-blue-700 transition-all font-semibold",children:[m==="login"&&"로그인 / Login",m==="signup"&&"회원가입 / Sign Up",m==="admin_login"&&"관리자 로그인 / Admin Login"]})]}),m!=="admin_login"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"my-6 flex items-center",children:[e.jsx("div",{className:"flex-1 border-t border-gray-300"}),e.jsx("span",{className:"px-4 text-sm text-gray-500",children:"또는"}),e.jsx("div",{className:"flex-1 border-t border-gray-300"})]}),e.jsxs("button",{type:"button",onClick:async()=>{_(!0);try{const[r,g]=await x();r?d("Google 로그인에 성공했습니다.","success"):d(g||"Google 로그인에 실패했습니다.","error")}finally{_(!1)}},disabled:T,className:"w-full py-3 px-4 border border-gray-300 rounded-xl hover:bg-gray-50 transition-all font-medium flex items-center justify-center gap-3",children:[e.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[e.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),e.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),e.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),e.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Google로 ",m==="login"?"로그인":"가입하기"]})]})]}),v&&e.jsx(ms,{onConfirm:w,onCancel:()=>k(!1),errorText:A}),R&&e.jsx(ds,{email:O,setEmail:S,onSendLink:V,onCancel:()=>b(!1),submitting:T})]})},xs=({currentUser:t,activeTab:s,setActiveTab:c,onLogout:x})=>{const[d,m]=l.useState(!1),[i,f]=l.useState(!1),D=l.useRef(null),p="flex items-center space-x-2 px-3 py-2 rounded-lg transition-all duration-200",N={dashboard:"bg-blue-50 text-blue-600 font-semibold",booking:"bg-blue-50 text-blue-600 font-semibold",program:"bg-purple-50 text-purple-600 font-semibold",admin:"bg-green-50 text-green-600 font-semibold",userManagement:"bg-yellow-50 text-yellow-700 font-semibold",facilities:"bg-indigo-50 text-indigo-600 font-semibold"},u="text-gray-600 hover:bg-gray-100 hover:text-gray-900 hover:-translate-y-px";l.useEffect(()=>{const n=a=>{D.current&&!D.current.contains(a.target)&&m(!1)};return document.addEventListener("mousedown",n),()=>document.removeEventListener("mousedown",n)},[]);const y=n=>{c(n),f(!1)};return e.jsxs("div",{className:"bg-white border-b border-gray-200 px-4 py-3 sticky top-0 z-40",children:[e.jsxs("div",{className:"max-w-6xl mx-auto flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-lg flex items-center justify-center",children:e.jsx(ne,{className:"w-5 h-5 text-white"})}),e.jsx("span",{className:"text-xl font-bold text-gray-900",children:"FlexSpace Pro"})]}),e.jsxs("nav",{className:"hidden md:flex space-x-2",children:[e.jsxs("button",{onClick:()=>y("dashboard"),className:`${p} ${s==="dashboard"?N.dashboard:u}`,children:[e.jsx(Ue,{className:"w-4 h-4"}),e.jsx("span",{children:"대시보드 / Dashboard"})]}),e.jsxs("button",{onClick:()=>y("booking"),className:`${p} ${s==="booking"?N.booking:u}`,children:[e.jsx(se,{className:"w-4 h-4"}),e.jsx("span",{children:"체육관 대관 / Booking"})]}),e.jsxs("button",{onClick:()=>y("program"),className:`${p} ${s==="program"?N.program:u}`,children:[e.jsx(he,{className:"w-4 h-4"}),e.jsx("span",{children:"프로그램 / Program"})]}),t.role==="admin"&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>y("admin"),className:`${p} ${s==="admin"?N.admin:u}`,children:[e.jsx(et,{className:"w-4 h-4"}),e.jsx("span",{children:"운영 관리 / Operations"})]}),e.jsxs("button",{onClick:()=>y("facilities"),className:`${p} ${s==="facilities"?N.facilities:u}`,children:[e.jsx(tt,{className:"w-4 h-4"}),e.jsx("span",{children:"시설 관리 / Facilities"})]}),e.jsxs("button",{onClick:()=>y("userManagement"),className:`${p} ${s==="userManagement"?N.userManagement:u}`,children:[e.jsx(ne,{className:"w-4 h-4"}),e.jsx("span",{children:"회원 관리 / Users"})]})]})]}),e.jsx("button",{onClick:()=>f(!i),className:"md:hidden p-2 rounded-lg hover:bg-gray-100 transition-colors",children:i?e.jsx(dt,{className:"w-5 h-5"}):e.jsx(Kt,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"relative",ref:D,children:[e.jsxs("button",{onClick:()=>m(!d),className:"flex items-center space-x-2 cursor-pointer p-2 rounded-lg hover:bg-gray-100 transition-colors",children:[e.jsxs("span",{className:"text-sm text-gray-600 font-medium hidden sm:block",children:[t.name," (",t.role==="admin"?"관리자":"사용자",")"]}),e.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center text-gray-600",children:t.name.charAt(0).toUpperCase()})]}),d&&e.jsx("div",{className:"absolute right-0 mt-2 w-56 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 origin-top-right animate-on-load z-50",style:{animationName:"fadeInUp",animationDuration:"0.2s"},children:e.jsxs("div",{className:"py-1",role:"menu","aria-orientation":"vertical","aria-labelledby":"options-menu",children:[e.jsxs("div",{className:"px-4 py-2 text-sm text-gray-700 border-b",children:[e.jsx("p",{className:"font-semibold",children:t.name}),e.jsx("p",{className:"text-xs text-gray-500 truncate",children:t.email})]}),e.jsx("div",{className:"py-1",children:e.jsxs("button",{onClick:x,className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 flex items-center",role:"menuitem",children:[e.jsx(Wt,{className:"w-4 h-4 mr-2"}),"로그아웃 / Logout"]})})]})})]})]}),i&&e.jsx("div",{className:"md:hidden bg-white border-b border-gray-200",children:e.jsxs("div",{className:"px-4 py-2 space-y-1",children:[e.jsxs("button",{onClick:()=>y("dashboard"),className:`w-full text-left ${p} ${s==="dashboard"?N.dashboard:u}`,children:[e.jsx(Ue,{className:"w-4 h-4"}),e.jsx("span",{children:"대시보드 / Dashboard"})]}),e.jsxs("button",{onClick:()=>y("booking"),className:`w-full text-left ${p} ${s==="booking"?N.booking:u}`,children:[e.jsx(se,{className:"w-4 h-4"}),e.jsx("span",{children:"체육관 대관 / Booking"})]}),e.jsxs("button",{onClick:()=>y("program"),className:`w-full text-left ${p} ${s==="program"?N.program:u}`,children:[e.jsx(he,{className:"w-4 h-4"}),e.jsx("span",{children:"프로그램 / Program"})]}),t.role==="admin"&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>y("admin"),className:`w-full text-left ${p} ${s==="admin"?N.admin:u}`,children:[e.jsx(et,{className:"w-4 h-4"}),e.jsx("span",{children:"운영 관리 / Operations"})]}),e.jsxs("button",{onClick:()=>y("facilities"),className:`w-full text-left ${p} ${s==="facilities"?N.facilities:u}`,children:[e.jsx(tt,{className:"w-4 h-4"}),e.jsx("span",{children:"시설 관리 / Facilities"})]}),e.jsxs("button",{onClick:()=>y("userManagement"),className:`w-full text-left ${p} ${s==="userManagement"?N.userManagement:u}`,children:[e.jsx(ne,{className:"w-4 h-4"}),e.jsx("span",{children:"회원 관리 / Users"})]})]})]})})]})},hs="modulepreload",gs=function(t,s){return new URL(t,s).href},at={},K=function(s,c,x){let d=Promise.resolve();if(c&&c.length>0){let p=function(N){return Promise.all(N.map(u=>Promise.resolve(u).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};const i=document.getElementsByTagName("link"),f=document.querySelector("meta[property=csp-nonce]"),D=f?.nonce||f?.getAttribute("nonce");d=p(c.map(N=>{if(N=gs(N,x),N in at)return;at[N]=!0;const u=N.endsWith(".css"),y=u?'[rel="stylesheet"]':"";if(!!x)for(let o=i.length-1;o>=0;o--){const h=i[o];if(h.href===N&&(!u||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${N}"]${y}`))return;const a=document.createElement("link");if(a.rel=u?"stylesheet":hs,u||(a.as="script"),a.crossOrigin="",a.href=N,D&&a.setAttribute("nonce",D),document.head.appendChild(a),u)return new Promise((o,h)=>{a.addEventListener("load",o),a.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${N}`)))})}))}function m(i){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=i,window.dispatchEvent(f),!f.defaultPrevented)throw i}return d.then(i=>{for(const f of i||[])f.status==="rejected"&&m(f.reason);return s().catch(m)})},ps=l.lazy(()=>K(()=>import("./DashboardCalendar-CnKiYDlW.js"),__vite__mapDeps([0,1,2]),import.meta.url)),bs=t=>{const s=new Date;s.setHours(0,0,0,0);const c=new Date(t.startDate);c.setHours(0,0,0,0);const x=new Date(t.endDate);return x.setHours(0,0,0,0),s>x?{text:"종료",dDay:null}:s>=c&&s<=x?{text:"진행중",dDay:null}:{text:"모집중",dDay:Math.ceil((c.getTime()-s.getTime())/(1e3*60*60*24))}},nt=({status:t})=>{const s={approved:{text:"승인됨 / Approved",color:"bg-green-100 text-green-800"},pending:{text:"대기중 / Pending",color:"bg-orange-100 text-orange-800"},rejected:{text:"거절됨 / Rejected",color:"bg-red-100 text-red-800"},completed:{text:"종료 / Ended",color:"bg-gray-100 text-gray-800"},cancelled:{text:"취소됨 / Cancelled",color:"bg-gray-100 text-gray-800"}},{text:c,color:x}=s[t];return e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${x}`,children:c})},ht=["일","월","화","수","목","금","토"],fs=t=>{const{startDate:s,endDate:c,recurrenceRule:x}=t;if(s===c)return s;let d="";return x&&x.days.length>0&&(d=` (매주 / Every ${x.days.sort().map(m=>ht[m]).join(", ")})`),`${s} ~ ${c}${d}`},ys=t=>`${t.scheduleDays.sort().map(c=>ht[c]).join(",")} ${t.startTime}-${t.endTime}`,lt=({currentUser:t,bookings:s=[],applications:c=[],programs:x=[],setActiveTab:d,syncing:m=!1})=>{const{users:i}=Pe(),f=l.useMemo(()=>s.filter(n=>n.userId===t.id).sort((n,a)=>new Date(a.startDate).getTime()-new Date(n.startDate).getTime()),[s,t.id]),D=l.useMemo(()=>c.filter(n=>n.userId===t.id).sort((n,a)=>{const o=n.appliedAt?.toDate?n.appliedAt.toDate():new Date(n.appliedAt||0);return(a.appliedAt?.toDate?a.appliedAt.toDate():new Date(a.appliedAt||0)).getTime()-o.getTime()}),[c,t.id]),p=l.useMemo(()=>s.filter(n=>n.status==="pending"),[s]),N=l.useMemo(()=>c.filter(n=>n.status==="pending"),[c]),[u,y]=l.useState("month");return e.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:t.role==="admin"?"관리자 대시보드 / Admin Dashboard":"마이 대시보드 / My Dashboard"}),e.jsx("p",{className:"text-gray-600",children:t.role==="admin"?"체육관 운영 현황을 한눈에 확인하세요 / Check gym operational status at a glance":"나의 예약과 프로그램 신청 현황입니다 / View your booking and program application status"})]}),m&&e.jsxs("div",{className:"flex items-center gap-2 text-blue-600",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"}),e.jsx("span",{className:"text-sm",children:"동기화 중..."})]})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:t.role==="admin"?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-100 transition-all duration-300 hover:shadow-lg hover:-translate-y-1",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"대기중인 대관 / Pending Bookings"}),e.jsx("p",{className:"text-3xl font-bold text-orange-600",children:p.length})]}),e.jsx("div",{className:"w-12 h-12 bg-orange-50 rounded-xl flex items-center justify-center",children:e.jsx(se,{className:"w-6 h-6 text-orange-600"})})]})}),e.jsx("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-100 transition-all duration-300 hover:shadow-lg hover:-translate-y-1",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"대기중인 프로그램 신청 / Pending Applications"}),e.jsx("p",{className:"text-3xl font-bold text-purple-600",children:N.length})]}),e.jsx("div",{className:"w-12 h-12 bg-purple-50 rounded-xl flex items-center justify-center",children:e.jsx(xe,{className:"w-6 h-6 text-purple-600"})})]})}),e.jsx("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-100 transition-all duration-300 hover:shadow-lg hover:-translate-y-1",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"운영중인 프로그램 / Active Programs"}),e.jsx("p",{className:"text-3xl font-bold text-green-600",children:x.filter(n=>{const a=new Date;return new Date(n.endDate)>=a}).length})]}),e.jsx("div",{className:"w-12 h-12 bg-green-50 rounded-xl flex items-center justify-center",children:e.jsx(he,{className:"w-6 h-6 text-green-600"})})]})}),e.jsx("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-100 transition-all duration-300 hover:shadow-lg hover:-translate-y-1",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"총 이용자 수 / Total Users"}),e.jsx("p",{className:"text-3xl font-bold text-blue-600",children:i.length})]}),e.jsx("div",{className:"w-12 h-12 bg-blue-50 rounded-xl flex items-center justify-center",children:e.jsx(ne,{className:"w-6 h-6 text-blue-600"})})]})})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-100",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"나의 대관 / My Bookings"}),e.jsx("p",{className:"text-3xl font-bold text-blue-600",children:f.length})]}),e.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-100",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"나의 프로그램 신청 / My Applications"}),e.jsx("p",{className:"text-3xl font-bold text-purple-600",children:D.length})]}),e.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-100",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"운영중인 프로그램 / Active Programs"}),e.jsx("p",{className:"text-3xl font-bold text-green-600",children:x.length})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"최근 대관 신청 / Recent Bookings"}),e.jsxs("div",{className:"space-y-4",children:[(t.role==="admin"?s.slice(0,3):f.slice(0,3)).map(n=>e.jsx("div",{className:"p-4 bg-gray-50 rounded-xl transition-colors duration-200 hover:bg-gray-100 border-l-4 border-blue-500",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:n.purpose}),e.jsx(nt,{status:n.status})]}),e.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[e.jsxs("p",{className:"flex items-center gap-2",children:[e.jsx(se,{className:"w-4 h-4"}),n.organization&&`${n.organization} | `,fs(n)," ",n.startTime,"-",n.endTime]}),t.role==="admin"&&e.jsxs("p",{className:"flex items-center gap-2",children:[e.jsx(ne,{className:"w-4 h-4"}),"신청자: ",n.userName," (",n.userEmail,")"]}),e.jsxs("p",{className:"flex items-center gap-2 text-gray-500",children:[e.jsx(he,{className:"w-4 h-4"}),n.category==="class"?"수업":n.category==="event"?"행사":n.category==="personal"?"개인":"동아리"," | ",n.numberOfParticipants,"명"]})]})]})})},n.id)),(t.role==="admin"?s:f).length===0&&e.jsx("p",{className:"text-center text-gray-500 py-8",children:"대관 신청 내역이 없습니다."})]}),(t.role==="admin"?s:f).length>3&&e.jsx("button",{onClick:()=>d("booking"),className:"w-full mt-4 py-2 text-sm font-medium text-blue-600 hover:text-blue-800 transition-colors",children:"전체 보기"})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:t.role==="admin"?"프로그램 신청 현황 / Program Applications":"내 프로그램 / My Programs"}),e.jsxs("div",{className:"space-y-4",children:[(t.role==="admin"?c.slice(0,3):D.slice(0,3)).map(n=>{const a=x.find(h=>h.id===n.programId),o=a?bs(a):null;return e.jsx("div",{className:"p-4 bg-gray-50 rounded-xl transition-colors duration-200 hover:bg-gray-100 border-l-4 border-purple-500",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:a?.title||n.programTitle||"Unknown Program"}),o&&o.dDay!==null&&e.jsxs("span",{className:"bg-red-500 text-white text-xs font-bold px-2.5 py-1 rounded-full",children:["D-",o.dDay]}),e.jsx(nt,{status:n.status})]}),a&&e.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[e.jsxs("p",{className:"flex items-center gap-2",children:[e.jsx(ne,{className:"w-4 h-4"}),"강사: ",a.instructor," | 기간: ",a.startDate," ~ ",a.endDate]}),e.jsxs("p",{className:"flex items-center gap-2",children:[e.jsx(se,{className:"w-4 h-4"}),"일정: ",ys(a)]}),e.jsxs("p",{className:"flex items-center gap-2",children:[e.jsx(he,{className:"w-4 h-4"}),"비용: ",a.fee?`${a.fee.toLocaleString()}원`:"무료"," | 정원: ",a.enrolled??0," / ",a.capacity,"명"]})]}),t.role==="admin"&&e.jsxs("p",{className:"text-sm text-gray-500 mt-2 flex items-center gap-2",children:[e.jsx(xe,{className:"w-4 h-4"}),"신청자: ",n.userName," | 신청일: ",(n.appliedAt?.toDate?n.appliedAt.toDate():new Date(n.appliedAt||0)).toLocaleDateString()]})]})})},n.id)}),(t.role==="admin"?c:D).length===0&&e.jsx("p",{className:"text-center text-gray-500 py-8",children:"프로그램 신청 내역이 없습니다."})]}),(t.role==="admin"?c:D).length>3&&e.jsx("button",{onClick:()=>d("program"),className:"w-full mt-4 py-2 text-sm font-medium text-purple-600 hover:text-purple-800 transition-colors",children:"전체 보기"})]})]}),e.jsxs("div",{id:"dashboard-calendar-section",className:"mt-6 bg-white rounded-2xl shadow-sm border border-gray-100 p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"전체 일정 캘린더 / Full Schedule Calendar"}),e.jsx(l.Suspense,{fallback:e.jsx("div",{className:"text-gray-500",children:"캘린더 로딩 중..."}),children:e.jsx(ps,{bookings:t.role==="admin"?s:f,programs:x,view:u,setView:y})})]})]})},js=({value:t,onChange:s,min:c=1,max:x})=>{const d=()=>{const f=t+1;(x===void 0||f<=x)&&s(f)},m=()=>{const f=t-1;(c===void 0||f>=c)&&s(f)},i=f=>{const D=parseInt(f.target.value.replace(/[^0-9]/g,""),10);isNaN(D)?f.target.value===""&&s(c):(c===void 0||D>=c)&&(x===void 0||D<=x)?s(D):c!==void 0&&D<c&&s(c)};return e.jsxs("div",{className:"relative flex items-center",children:[e.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",value:t,onChange:i,className:"w-full p-3 border border-gray-200 rounded-xl text-center"}),e.jsxs("div",{className:"absolute right-2 flex flex-col",children:[e.jsx("button",{type:"button",onClick:d,className:"p-1 text-gray-500 hover:text-gray-800",children:e.jsx(Xt,{className:"w-4 h-4"})}),e.jsx("button",{type:"button",onClick:m,className:"p-1 text-gray-500 hover:text-gray-800",children:e.jsx(Yt,{className:"w-4 h-4"})})]})]})},ws=Ge(Ae,"createBooking"),vs=async(t,s,c)=>{const x={userId:c.id,userName:c.name,userEmail:c.email,purpose:t.purpose,category:t.category,numberOfParticipants:t.numberOfParticipants,facilityId:t.facilityId,startDate:t.startDate,endDate:t.endDate,startTime:t.startTime,endTime:t.endTime,status:"pending",createdAt:re(),updatedAt:re()};return await fe(ae(Y,"bookings",s),x),{bookingId:s}},Ns=l.memo(({status:t})=>{const s={approved:{text:"승인됨 / Approved",color:"bg-green-100 text-green-800"},pending:{text:"대기중 / Pending",color:"bg-orange-100 text-orange-800"},rejected:{text:"거절됨 / Rejected",color:"bg-red-100 text-red-800"},completed:{text:"종료 / Ended",color:"bg-gray-100 text-gray-800"},cancelled:{text:"취소됨 / Cancelled",color:"bg-gray-100 text-gray-800"}},{text:c,color:x}=s[t];return e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${x}`,children:c})}),Ds=["일","월","화","수","목","금","토"],Cs=t=>{const{startDate:s,endDate:c,recurrenceRule:x}=t;if(s===c)return s;let d="";return x&&x.days.length>0&&(d=` (매주 / Every ${x.days.sort().map(m=>Ds[m]).join(", ")})`),`${s} ~ ${c}${d}`},it=l.memo(({booking:t,facilities:s})=>{const c=s.find(x=>x.id===t.facilityId);return e.jsx("div",{className:"p-3 bg-gray-50 rounded-xl transition-colors duration-200 hover:bg-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:t.purpose}),e.jsxs("p",{className:"text-sm text-gray-600",children:[c?.name," | ",t.organization?`${t.organization} | `:"",Cs(t)," ",t.startTime,"-",t.endTime]})]}),e.jsx(Ns,{status:t.status})]})})}),ks=({currentUser:t,bookings:s,setBookings:c,syncing:x=!1})=>{const{facilities:d}=Pe(),{showNotification:m}=$e(),[i,f]=l.useState({purpose:"",category:"personal",numberOfParticipants:1,startDate:new Date().toISOString().split("T")[0],endDate:new Date().toISOString().split("T")[0],startTime:"09:00",endTime:"10:00",facilityId:""}),[D,p]=l.useState(!1),[N,u]=l.useState("list"),[y,n]=l.useState(new Date),a=l.useMemo(()=>s.filter(O=>(O.userId===t.id||O.userEmail===t.email)&&O.status!=="completed"),[s,t.id,t.email]),o=l.useMemo(()=>s.filter(b=>(b.userId===t.id||b.userEmail===t.email)&&b.status==="completed"),[s,t.id,t.email]),h=l.useCallback(()=>{const b=y.getFullYear(),O=y.getMonth(),S=new Date(b,O,1),T=new Date(S);T.setDate(T.getDate()-S.getDay());const _=[];for(let A=0;A<42;A++){const E=new Date(T);E.setDate(T.getDate()+A),_.push(E)}return _},[y]),v=l.useCallback(b=>{const O=b.toISOString().split("T")[0];return s.filter(T=>{if(!(T.userId===t.id||T.userEmail===t.email))return!1;const A=new Date(T.startDate+"T00:00:00"),E=new Date(T.endDate+"T00:00:00"),V=new Date(O+"T00:00:00");return V>=A&&V<=E?T.recurrenceRule&&T.recurrenceRule.days&&T.recurrenceRule.days.length>0?T.recurrenceRule.days.includes(V.getDay()):!0:!1})},[s,t.id,t.email]),k=l.useCallback(b=>{n(O=>{const S=new Date(O);return S.setMonth(O.getMonth()+(b==="next"?1:-1)),S})},[]),R=l.useCallback(async b=>{if(b.preventDefault(),D){console.log("이미 처리 중인 요청이 있습니다.");return}p(!0);const O=Date.now(),S=window.lastBookingSubmit||0;if(O-S<1e3){console.log("너무 빠른 연속 클릭 차단"),p(!1);return}window.lastBookingSubmit=O;try{if(!i.purpose?.trim()){m("대관 목적을 입력해주세요.","error");return}if(i.purpose.trim().length<2){m("체육관 목적을 최소 2글자 이상 입력해 주세요.","error");return}if(!i.category||!i.startDate||!i.endDate||!i.startTime||!i.endTime){m("모든 필수 항목을 입력해주세요.","error");return}const T=new Date(i.startDate),_=new Date(i.endDate),A=new Date;if(A.setHours(0,0,0,0),T<A){m("시작일은 오늘 이후로 선택해주세요.","error");return}if(_<T){m("종료일은 시작일 이후로 선택해주세요.","error");return}if(i.startTime>=i.endTime){m("종료 시간은 시작 시간 이후로 선택해주세요.","error");return}if(!i.facilityId){m("시설을 선택해주세요.","error");return}const E=d.find(I=>I.id===i.facilityId);if(!E){m("선택된 시설을 찾을 수 없습니다.","error");return}const V=E.bookingPolicy,w=V?.allowOverlap||!1,B=V?.maxConcurrent||1,U=s.filter(I=>{if(I.facilityId!==i.facilityId||I.status!=="approved"&&I.status!=="pending")return!1;const L=new Date(I.startDate),$=new Date(I.endDate),X=new Date(i.startDate),W=new Date(i.endDate);if(!(L<=W&&$>=X))return!1;const[ee,te]=I.startTime.split(":").map(Number),[oe,ce]=I.endTime.split(":").map(Number),[ve,Ne]=i.startTime.split(":").map(Number),[De,Ce]=i.endTime.split(":").map(Number),ke=ee*60+te,pe=oe*60+ce,le=ve*60+Ne,j=De*60+Ce;return ke<j&&pe>le});if(!w&&U.length>0){m(`현재 [${E.name}]은 단독 사용만 가능합니다. 같은 시간에 다른 예약이 있어 신청할 수 없습니다.`,"error");return}if(w&&U.length>=B){m(`현재 [${E.name}]은 ${B}팀 이상 제한으로 대관이 불가합니다.`,"error");return}const r={purpose:i.purpose,category:i.category,numberOfParticipants:i.numberOfParticipants||1,facilityId:E.id,startDate:i.startDate,endDate:i.endDate,startTime:i.startTime,endTime:i.endTime},g=`booking-${Date.now()}-${Math.random().toString(36).substr(2,9)}`;let C=!1,M=null;const q=Date.now(),H=`${t.id}-${r.startDate}-${r.startTime}`,P=window.lastBookingSubmits?.[H]||0;if(q-P<3e3){m("잠시만 기다려주세요.","warning");return}window.lastBookingSubmits||(window.lastBookingSubmits={}),window.lastBookingSubmits[H]=q;try{const I=ws(r),L=new Promise((X,W)=>setTimeout(()=>W(new Error("타임아웃")),3e3)),$=await Promise.race([I,L]);C=!0,M={id:$?.data?.bookingId||g,userId:t.id,userName:t.name,userEmail:t.email,...r,status:"pending",createdAt:new Date}}catch{try{await vs(r,g,t),C=!0,M={id:g,userId:t.id,userName:t.name,userEmail:t.email,...r,status:"pending",createdAt:new Date}}catch{C=!1}}C?(f({purpose:"",category:"personal",numberOfParticipants:1,startDate:new Date().toISOString().split("T")[0],endDate:new Date().toISOString().split("T")[0],startTime:"09:00",endTime:"10:00",facilityId:""}),m("대관 신청이 완료되었습니다!","success")):m("대관 신청에 실패했습니다.","error")}catch(T){console.error("대관 신청 최종 오류:",T),m("대관 신청 중 문제가 발생했습니다. 다시 시도해주세요.","error")}finally{p(!1)}},[i,d,m,t]);return e.jsxs("div",{className:"max-w-6xl mx-auto p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"체육관 대관 / Gym Booking"}),e.jsx("p",{className:"text-gray-600",children:"체육관 공간을 예약하고 관리하세요 / Book and manage gym spaces"}),x&&e.jsxs("div",{className:"flex items-center gap-2 text-blue-600 mt-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-blue-600"}),e.jsx("span",{className:"text-xs",children:"동기화 중..."})]})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-gray-100 p-1 rounded-lg",children:[e.jsxs("button",{onClick:()=>u("list"),className:`flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-colors ${N==="list"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[e.jsx(Qt,{className:"w-4 h-4"}),"목록 / List"]}),e.jsxs("button",{onClick:()=>u("calendar"),className:`flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-colors ${N==="calendar"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[e.jsx(se,{className:"w-4 h-4"}),"캘린더 / Calendar"]})]})]}),N==="list"?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"진행중인 대관 / Active Bookings"}),e.jsxs("div",{className:"space-y-3",children:[a.map(b=>e.jsx(it,{booking:b,facilities:d},b.id)),a.length===0&&e.jsx("p",{className:"text-center text-gray-500 py-10",children:"진행중인 대관 신청이 없습니다."})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"완료된 대관 / Completed Bookings"}),e.jsxs("div",{className:"space-y-3 max-h-96 overflow-y-auto pr-2",children:[o.map(b=>e.jsx(it,{booking:b,facilities:d},b.id)),o.length===0&&e.jsx("p",{className:"text-center text-gray-500 py-10",children:"완료된 대관이 없습니다."})]})]})]})}):e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900",children:[y.getFullYear(),"년 ",y.getMonth()+1,"월"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>k("prev"),className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",children:e.jsx(Zt,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>n(new Date),className:"px-4 py-2 text-sm font-medium text-blue-600 hover:text-blue-800 transition-colors",children:"오늘"}),e.jsx("button",{onClick:()=>k("next"),className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",children:e.jsx(Jt,{className:"w-5 h-5"})})]})]}),e.jsx("div",{className:"grid grid-cols-7 gap-px mb-2",children:["일","월","화","수","목","금","토"].map(b=>e.jsx("div",{className:"p-2 text-center text-sm font-medium text-gray-500",children:b},b))}),e.jsx("div",{className:"grid grid-cols-7 gap-px bg-gray-200 rounded-lg overflow-hidden",children:h().map((b,O)=>{const S=v(b),T=b.getMonth()===y.getMonth(),_=b.toDateString()===new Date().toDateString();return e.jsxs("div",{className:`bg-white p-2 min-h-[120px] ${T?"text-gray-900":"text-gray-400"} ${_?"bg-blue-50":""}`,children:[e.jsx("div",{className:`text-sm font-medium mb-1 ${_?"text-blue-600":""}`,children:b.getDate()}),e.jsxs("div",{className:"space-y-1",children:[S.slice(0,3).map(A=>e.jsx("div",{className:`text-xs px-2 py-1 rounded text-white text-center truncate ${A.status==="approved"?"bg-green-500":A.status==="pending"?"bg-orange-500":A.status==="rejected"?"bg-red-500":"bg-gray-500"}`,title:`${A.purpose} (${A.startTime}-${A.endTime})`,children:A.purpose},A.id)),S.length>3&&e.jsxs("div",{className:"text-xs text-gray-500 text-center",children:["+",S.length-3," more"]})]})]},O)})}),e.jsxs("div",{className:"flex items-center justify-center gap-6 mt-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded"}),e.jsx("span",{children:"승인됨"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-orange-500 rounded"}),e.jsx("span",{children:"대기중"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-red-500 rounded"}),e.jsx("span",{children:"거절됨"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-gray-500 rounded"}),e.jsx("span",{children:"완료됨"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"신규 대관 신청"}),e.jsxs("form",{onSubmit:R,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"대관 목적"}),e.jsx("input",{type:"text",className:"w-full p-3 border border-gray-200 rounded-xl",value:i.purpose||"",onChange:b=>f({...i,purpose:b.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"분류"}),e.jsxs("select",{className:"w-full p-3 border border-gray-200 rounded-xl bg-white",value:i.category,onChange:b=>f({...i,category:b.target.value}),children:[e.jsx("option",{value:"personal",children:"개인"}),e.jsx("option",{value:"club",children:"동아리"}),e.jsx("option",{value:"event",children:"행사"}),e.jsx("option",{value:"class",children:"수업"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"시설 선택"}),e.jsxs("select",{className:"w-full p-3 border border-gray-200 rounded-xl bg-white",value:i.facilityId||"",onChange:b=>f({...i,facilityId:b.target.value}),children:[e.jsx("option",{value:"",children:"시설을 선택해 주세요"}),d.map(b=>e.jsx("option",{value:b.id,children:b.name},b.id))]})]}),e.jsx("div",{})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"시작일"}),e.jsx("input",{type:"date",className:"w-full p-3 border border-gray-200 rounded-xl",value:i.startDate||"",onChange:b=>f({...i,startDate:b.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"종료일"}),e.jsx("input",{type:"date",className:"w-full p-3 border border-gray-200 rounded-xl",value:i.endDate||"",onChange:b=>f({...i,endDate:b.target.value})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"시작 시간"}),e.jsx("input",{type:"time",className:"w-full p-3 border border-gray-200 rounded-xl",value:i.startTime||"",onChange:b=>f({...i,startTime:b.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"종료 시간"}),e.jsx("input",{type:"time",className:"w-full p-3 border border-gray-200 rounded-xl",value:i.endTime||"",onChange:b=>f({...i,endTime:b.target.value})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"인원"}),e.jsx(js,{value:i.numberOfParticipants||1,onChange:b=>f({...i,numberOfParticipants:b})})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{type:"submit",disabled:D,className:`w-full md:w-auto px-6 py-3 rounded-xl font-medium transition-all duration-200 transform ${D?"bg-gray-400 cursor-not-allowed scale-95":"bg-blue-600 hover:bg-blue-700 hover:scale-105 text-white shadow-lg hover:shadow-xl"}`,style:{pointerEvents:D?"none":"auto"},children:D?e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),e.jsx("span",{children:"처리 중..."})]}):e.jsx("span",{className:"flex items-center gap-2",children:"📅 대관 신청"})})})]})]})]})]})},Ss=Ge(Ae,"createProgramApplication"),Es=["일","월","화","수","목","금","토"],Ts=t=>{const s=new Date;s.setHours(0,0,0,0);const c=new Date(t.startDate);c.setHours(0,0,0,0);const x=new Date(t.endDate);return x.setHours(0,0,0,0),s>x?{text:"종료",dDay:null}:s>=c&&s<=x?{text:"진행중",dDay:null}:{text:"모집중",dDay:Math.ceil((c.getTime()-s.getTime())/(1e3*60*60*24))}},gt=t=>`${(t.scheduleDays||[]).sort().map(s=>Es[s]).join(", ")} ${t.startTime}-${t.endTime}`;l.memo(({p:t,status:s,onApply:c,applying:x,isAlreadyApplied:d,applicationStatus:m})=>e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t.title}),s.dDay!==null&&e.jsxs("span",{className:"px-2.5 py-1 rounded-full text-xs font-semibold bg-red-500 text-white",children:["D-",s.dDay]})]}),e.jsxs("div",{className:"flex items-center space-x-6 text-sm text-gray-500 flex-wrap",children:[e.jsxs("span",{children:["강사: ",t.instructor]}),e.jsxs("span",{children:["기간: ",t.startDate," ~ ",t.endDate]}),e.jsxs("span",{children:["일정: ",gt(t)]}),e.jsxs("span",{children:["비용: ",t.fee?`${t.fee.toLocaleString()}원`:"무료 / Free"]}),e.jsxs("span",{children:["정원: ",t.enrolled??0," / ",t.capacity]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${s.text==="종료"?"bg-gray-100 text-gray-800":"bg-green-100 text-green-800"}`,children:s.text}),d&&e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${m==="approved"?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"}`,children:m==="approved"?"승인됨":"신청완료"}),s.text!=="종료"&&e.jsx("button",{disabled:x||d,onClick:()=>c(t.id),className:`px-4 py-2 rounded-xl font-medium transition-colors ${d?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-purple-600 text-white hover:bg-purple-700"}`,children:d?"신청완료":x?"신청중...":"신청하기"})]})]})}));const As=({currentUser:t,programs:s,applications:c,setApplications:x})=>{const{showNotification:d}=$e(),[m,i]=l.useState(""),[f,D]=l.useState(null),p=l.useMemo(()=>s.filter(u=>u.title.toLowerCase().includes(m.toLowerCase())),[s,m]),N=l.useCallback(async u=>{const y=c.find(a=>a.programId===u&&a.userId===t.id&&(a.status==="pending"||a.status==="approved"));if(y){const a=y.status==="pending"?"대기중":"승인됨";d(`이미 이 프로그램에 신청하셨습니다. (현재 상태: ${a})`,"warning");return}D(u);const n={id:`temp-${Date.now()}`,userId:t.id,programId:u,status:"pending",appliedAt:new Date,userName:t.name,userEmail:t.email,programTitle:s.find(a=>a.id===u)?.title||"Unknown Program"};x(a=>[n,...a]),d("프로그램 신청이 완료되었습니다. 관리자 승인을 기다려주세요.","success");try{const a=await Ss({programId:u});if(a?.data?.success)x(o=>o.map(h=>h.id===n.id?{...h,id:a.data.applicationId}:h)),console.log("프로그램 신청 Firebase 저장 성공:",a.data.applicationId);else{x(h=>h.filter(v=>v.id!==n.id));const o=a?.data?.message||"신청에 실패했습니다. 잠시 후 다시 시도해주세요.";d(o,"error")}}catch(a){x(o=>o.filter(h=>h.id!==n.id)),d(`신청 실패: ${a?.message||"네트워크 오류가 발생했습니다. 잠시 후 다시 시도해주세요."}`,"error")}finally{D(null)}},[d,t,s,x,c]);return e.jsxs("div",{className:"max-w-6xl mx-auto p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"프로그램"}),e.jsx("p",{className:"text-gray-600",children:"다양한 체육 프로그램에 참여해보세요"})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"검색"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(mt,{className:"w-5 h-5 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),e.jsx("input",{value:m,onChange:u=>i(u.target.value),placeholder:"프로그램명, 강사명...",className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none"})]}),e.jsxs("select",{className:"w-full p-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none",children:[e.jsx("option",{value:"",children:"종목"}),e.jsx("option",{value:"yoga",children:"요가"}),e.jsx("option",{value:"pilates",children:"필라테스"}),e.jsx("option",{value:"fitness",children:"피트니스"}),e.jsx("option",{value:"dance",children:"댄스"}),e.jsx("option",{value:"badminton",children:"배드민턴"}),e.jsx("option",{value:"pickleball",children:"피클볼"})]}),e.jsxs("select",{className:"w-full p-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none",children:[e.jsx("option",{value:"",children:"요일"}),e.jsx("option",{value:"월",children:"월요일"}),e.jsx("option",{value:"화",children:"화요일"}),e.jsx("option",{value:"수",children:"수요일"}),e.jsx("option",{value:"목",children:"목요일"}),e.jsx("option",{value:"금",children:"금요일"}),e.jsx("option",{value:"토",children:"토요일"}),e.jsx("option",{value:"일",children:"일요일"})]}),e.jsxs("select",{className:"w-full p-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none",children:[e.jsx("option",{value:"",children:"시간대"}),e.jsx("option",{value:"morning",children:"오전 (06:00-12:00)"}),e.jsx("option",{value:"afternoon",children:"오후 (12:00-18:00)"}),e.jsx("option",{value:"evening",children:"저녁 (18:00-22:00)"})]}),e.jsxs("select",{className:"w-full p-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none",children:[e.jsx("option",{value:"",children:"레벨"}),e.jsx("option",{value:"beginner",children:"초급"}),e.jsx("option",{value:"intermediate",children:"중급"}),e.jsx("option",{value:"advanced",children:"고급"})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900",children:["진행중인 프로그램 (",p.length,"개)"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:"px-4 py-2 text-sm font-medium text-purple-600 bg-purple-50 rounded-lg",children:"필라테스"}),e.jsx("button",{className:"px-4 py-2 text-sm font-medium text-blue-600 bg-blue-50 rounded-lg",children:"진행 중"}),e.jsx("button",{className:"px-4 py-2 text-sm font-medium text-green-600 bg-green-50 rounded-lg",children:"초급"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:p.map(u=>{const y=Ts(u),n=c.find(o=>o.programId===u.id&&o.userId===t.id&&(o.status==="pending"||o.status==="approved")),a=!!n;return e.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden transition-all duration-300 hover:shadow-lg hover:-translate-y-1",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:u.title}),y.dDay!==null&&e.jsxs("span",{className:"px-2.5 py-1 rounded-full text-xs font-semibold bg-red-500 text-white",children:["D-",y.dDay]})]}),e.jsx("p",{className:"text-gray-600 mb-3",children:u.description})]}),e.jsxs("div",{className:"ml-4 flex flex-col gap-2",children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${y.text==="종료"?"bg-gray-100 text-gray-800":y.text==="진행중"?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800"}`,children:y.text}),a&&e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${n?.status==="approved"?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"}`,children:n?.status==="approved"?"승인됨":"신청완료"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-gray-600 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ne,{className:"w-4 h-4"}),e.jsxs("span",{children:["강사: ",u.instructor]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(se,{className:"w-4 h-4"}),e.jsxs("span",{children:["기간: ",u.startDate," ~ ",u.endDate]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ut,{className:"w-4 h-4"}),e.jsxs("span",{children:["일정: ",gt(u)]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(xe,{className:"w-4 h-4"}),e.jsxs("span",{children:["정원: ",u.enrolled??0," / ",u.capacity,"명"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-100",children:[e.jsx("div",{className:"text-lg font-bold text-purple-600",children:u.fee?`${u.fee.toLocaleString()}원`:"무료"}),y.text!=="종료"&&e.jsx("button",{disabled:f===u.id||a,onClick:()=>N(u.id),className:`px-6 py-2 rounded-xl font-medium transition-colors ${a?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-purple-600 text-white hover:bg-purple-700 disabled:opacity-50"}`,children:a?"신청완료":f===u.id?"신청중...":"신청하기"})]})]})},u.id)})}),p.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(he,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"검색 결과가 없습니다"}),e.jsx("p",{className:"text-gray-600",children:"다른 조건으로 검색해보세요."})]})]})},Ps=l.lazy(()=>K(()=>import("./DashboardCalendar-CnKiYDlW.js"),__vite__mapDeps([0,1,2]),import.meta.url));Ge(Ae,"updateReservationStatus");const pt=["일","월","화","수","목","금","토"],$s=t=>{const s=new Date;s.setHours(0,0,0,0);const c=new Date(t.startDate);c.setHours(0,0,0,0);const x=new Date(t.endDate);return x.setHours(0,0,0,0),s>x?{text:"종료",dDay:null}:s>=c&&s<=x?{text:"진행중",dDay:null}:{text:"모집중",dDay:Math.ceil((c.getTime()-s.getTime())/(1e3*60*60*24))}},_s=l.memo(({b:t,onAction:s})=>e.jsx("div",{className:"p-4 bg-gray-50 rounded-xl transition-shadow hover:shadow-md",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900",children:t.purpose}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[t.userName," | ",t.startDate," ",t.startTime,"-",t.endTime]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>s(t.id,"approve"),className:"px-3 py-2 rounded-lg bg-green-100 text-green-700 border border-green-200 text-sm font-medium",children:"승인"}),e.jsx("button",{onClick:()=>s(t.id,"reject"),className:"px-3 py-2 rounded-lg bg-red-100 text-red-700 border border-red-200 text-sm font-medium",children:"거절"})]})]})})),Ms=l.memo(({p:t,onEdit:s,onDelete:c})=>{const x=$s(t);return e.jsxs("div",{className:"p-4 bg-gray-50 rounded-xl flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:t.title}),x.dDay!==null&&e.jsxs("span",{className:"bg-red-500 text-white text-xs font-bold px-2.5 py-1 rounded-full",children:["D-",x.dDay]})]}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[t.instructor," | ",t.startDate," ~ ",t.endDate," | ",t.startDate!==t.endDate?(t.scheduleDays||[]).slice().sort().map(d=>pt[d]).join(","):"단일"," | ",t.startTime," - ",t.endTime," | ",t.fee?`${t.fee.toLocaleString()}원`:"무료"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>s(t),className:"p-2 text-gray-500 hover:text-blue-600 rounded-lg",children:e.jsx(Ke,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>c(t),className:"p-2 text-gray-500 hover:text-red-600 rounded-lg",children:e.jsx(We,{className:"w-4 h-4"})})]})]})});function Is({currentUser:t,bookings:s,setBookings:c,applications:x,setApplications:d,programs:m,setPrograms:i,users:f,facilities:D}){const{showNotification:p}=$e();console.log("🔍 AdminSection 프로그램 데이터 확인:",{programsCount:m.length,programs:m,activePrograms:m.filter(r=>{const g=new Date;return new Date(r.endDate)>=g}).length});const[N,u]=l.useState(!1),[y,n]=l.useState(null),[a,o]=l.useState("month"),h={title:"",description:"",instructor:"",capacity:10,scheduleDays:[],startTime:"09:00",endTime:"10:00",startDate:new Date().toISOString().split("T")[0],endDate:new Date().toISOString().split("T")[0],level:"beginner",category:"yoga",fee:0},[v,k]=l.useState(h),R=l.useMemo(()=>v.startDate!==v.endDate,[v.startDate,v.endDate]),b=l.useMemo(()=>{const r=[];for(let g=0;g<24;g++)for(let C=0;C<60;C+=10)r.push(`${String(g).padStart(2,"0")}:${String(C).padStart(2,"0")}`);return r},[]),O=l.useCallback(async()=>{const r={...y??{id:`program-${Date.now()}`},...v};y?(i(g=>g.map(C=>C.id===r.id?r:C)),p("프로그램이 수정되었습니다.","success")):(i(g=>[r,...g]),p("새 프로그램이 개설되었습니다.","success"));try{const{doc:g,setDoc:C,updateDoc:M,serverTimestamp:q}=await K(async()=>{const{doc:I,setDoc:L,updateDoc:$,serverTimestamp:X}=await import("./firebase-DnP1Uaxu.js").then(W=>W.M);return{doc:I,setDoc:L,updateDoc:$,serverTimestamp:X}},[],import.meta.url),{db:H}=await K(async()=>{const{db:I}=await Promise.resolve().then(()=>ie);return{db:I}},void 0,import.meta.url),P=new Date;y?(await M(g(H,"programs",r.id),{...r,updatedAt:P}),console.log("프로그램 수정 완료:",r.id)):(await C(g(H,"programs",r.id),{...r,createdAt:P,updatedAt:P}),console.log("새 프로그램 생성 완료:",r.id))}catch(g){console.warn("Firebase 저장 실패 (로컬 상태는 이미 업데이트됨):",g)}u(!1),n(null)},[v,y,i,p]),S=l.useCallback(async(r,g)=>{console.log("=== 대관 승인/거절 시작 ===",{bookingId:r,action:g});const C=g==="approve"?"approved":"rejected";try{console.log("1. 로컬 상태 업데이트 실행"),c(L=>L.map($=>$.id===r?{...$,status:C}:$)),p(`대관이 ${g==="approve"?"승인":"거절"}되었습니다.`,"success"),console.log("3. Firebase 저장 시작");const{doc:M,updateDoc:q,serverTimestamp:H}=await K(async()=>{const{doc:L,updateDoc:$,serverTimestamp:X}=await import("./firebase-DnP1Uaxu.js").then(W=>W.M);return{doc:L,updateDoc:$,serverTimestamp:X}},[],import.meta.url),{db:P}=await K(async()=>{const{db:L}=await Promise.resolve().then(()=>ie);return{db:L}},void 0,import.meta.url),I={status:C,updatedAt:H(),[g==="approve"?"approvedAt":"rejectedAt"]:H()};console.log("3-1. 업데이트할 데이터:",I),console.log("3-2. 대상 문서:",`bookings/${r}`),await q(M(P,"bookings",r),I),console.log("✅ Firebase 저장 성공 - 실시간 동기화 보장됨")}catch(M){console.error("❌ Firebase 저장 실패 (로컬 상태는 이미 업데이트됨):",M)}},[s,c,p]),T=l.useCallback(async(r,g)=>{const C=x;try{d(L=>L.map($=>$.id===r?{...$,status:g}:$));const{doc:M,updateDoc:q,serverTimestamp:H}=await K(async()=>{const{doc:L,updateDoc:$,serverTimestamp:X}=await import("./firebase-DnP1Uaxu.js").then(W=>W.M);return{doc:L,updateDoc:$,serverTimestamp:X}},[],import.meta.url),{db:P}=await K(async()=>{const{db:L}=await Promise.resolve().then(()=>ie);return{db:L}},void 0,import.meta.url),I=new Date;await q(M(P,"program_applications",r),{status:g,updatedAt:I,[g==="approved"?"approvedAt":"rejectedAt"]:I}),console.log("프로그램 신청 상태 Firebase 저장 성공:",r,g),p(`프로그램 신청이 ${g==="approved"?"승인":"거절"}되었습니다.`,"success")}catch(M){console.error("프로그램 신청 상태 업데이트 실패:",M),d(C),p("프로그램 신청 상태 변경에 실패했습니다. 다시 시도해주세요.","error")}},[x,d,p]),_=l.useMemo(()=>s.filter(r=>r.status==="pending"),[s]),A=l.useMemo(()=>x.filter(r=>r.status==="pending"),[x]),E=l.useMemo(()=>m.filter(r=>{const g=new Date;return new Date(r.endDate)>=g}),[m]),V=l.useMemo(()=>f.length,[f]),[w,B]=l.useState({name:"",category:"class",purpose:"",facilityId:"",startDate:new Date().toISOString().split("T")[0],endDate:new Date().toISOString().split("T")[0],startTime:"09:00",endTime:"10:00"}),U=l.useCallback(async()=>{if(!w.name||w.name.trim().length===0){p("신청자 이름을 입력해주세요.","error");return}if(!w.purpose||w.purpose.trim().length===0){p("대관 목적을 입력해주세요.","error");return}if(!w.facilityId){p("시설을 선택해주세요.","error");return}const r=new Date(w.startDate+"T00:00:00");if(new Date(w.endDate+"T00:00:00")<r){p("종료일은 시작일 이후로 선택해주세요.","error");return}if(w.startTime>=w.endTime){p("종료 시간은 시작 시간 이후로 선택해주세요.","error");return}const C=D.find($=>$.id===w.facilityId);if(!C){p("선택된 시설을 찾을 수 없습니다.","error");return}const M=C.bookingPolicy,q=M?.allowOverlap||!1,H=M?.maxConcurrent||1,P=s.filter($=>{if($.facilityId!==w.facilityId||$.status!=="approved")return!1;const X=new Date($.startDate),W=new Date($.endDate),ge=new Date(w.startDate),ee=new Date(w.endDate);if(!(X<=ee&&W>=ge))return!1;const[oe,ce]=$.startTime.split(":").map(Number),[ve,Ne]=$.endTime.split(":").map(Number),[De,Ce]=w.startTime.split(":").map(Number),[ke,pe]=w.endTime.split(":").map(Number),le=oe*60+ce,j=ve*60+Ne,F=De*60+Ce,Q=ke*60+pe;return le<Q&&j>F});if(!q&&P.length>0){p("이 시설은 단독 사용만 가능합니다. 같은 시간에 다른 예약이 있어 등록할 수 없습니다.","error");return}if(q&&P.length>=H){p(`이 시설은 최대 ${H}팀까지 동시 사용 가능합니다. 현재 ${P.length}팀이 예약되어 있어 추가 등록이 불가합니다.`,"error");return}const I=`booking-${Date.now()}`,L={id:I,userId:t.id,userName:w.name,userEmail:t.email,facilityId:w.facilityId,startDate:w.startDate,endDate:w.endDate,startTime:w.startTime,endTime:w.endTime,purpose:w.purpose,category:w.category,status:"approved",numberOfParticipants:1,createdAt:new Date};c($=>{const X=[L,...$];return console.log("📅 관리자 대관 등록 완료 - 캘린더 업데이트:",{bookingId:I,purpose:L.purpose,status:L.status,totalBookings:X.length}),X}),p("대관이 승인되어 등록되었습니다. 캘린더에서 확인 가능합니다.","success");try{const{doc:$,setDoc:X,serverTimestamp:W}=await K(async()=>{const{doc:ee,setDoc:te,serverTimestamp:oe}=await import("./firebase-DnP1Uaxu.js").then(ce=>ce.M);return{doc:ee,setDoc:te,serverTimestamp:oe}},[],import.meta.url),{db:ge}=await K(async()=>{const{db:ee}=await Promise.resolve().then(()=>ie);return{db:ee}},void 0,import.meta.url);await X($(ge,"bookings",I),{...L,createdAt:W(),updatedAt:W(),approvedAt:W()}),console.log("대관 신청 Firebase 저장 성공:",I)}catch($){console.warn("Firebase 저장 실패 (로컬 상태는 이미 업데이트됨):",$)}B({name:"",category:"class",purpose:"",facilityId:"",startDate:new Date().toISOString().split("T")[0],endDate:new Date().toISOString().split("T")[0],startTime:"09:00",endTime:"10:00"})},[w,t,c,p,D,s]);return e.jsxs("div",{className:"max-w-6xl mx-auto p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"운영 관리"}),e.jsx("p",{className:"text-gray-600",children:"대관 및 프로그램 신청을 관리하고, 체육관 직접 등록을 할 수 있습니다"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"대기중인 대관"}),e.jsx("p",{className:"text-2xl font-bold text-orange-600",children:_.length})]}),e.jsx("div",{className:"w-12 h-12 bg-orange-50 rounded-xl flex items-center justify-center",children:e.jsx(se,{className:"w-6 h-6 text-orange-600"})})]})}),e.jsx("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"대기중인 프로그램 신청"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:A.length})]}),e.jsx("div",{className:"w-12 h-12 bg-purple-50 rounded-xl flex items-center justify-center",children:e.jsx(xe,{className:"w-6 h-6 text-purple-600"})})]})}),e.jsx("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"운영중인 프로그램"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:E.length})]}),e.jsx("div",{className:"w-12 h-12 bg-green-50 rounded-xl flex items-center justify-center",children:e.jsx(he,{className:"w-6 h-6 text-green-600"})})]})}),e.jsx("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"총 이용자 수"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:V})]}),e.jsx("div",{className:"w-12 h-12 bg-blue-50 rounded-xl flex items-center justify-center",children:e.jsx(ne,{className:"w-6 h-6 text-blue-600"})})]})})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-50 rounded-lg flex items-center justify-center",children:e.jsx(xe,{className:"w-5 h-5 text-blue-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"수강생/팀 직접 등록"})]}),e.jsx("span",{className:"text-sm text-gray-600",children:"아래 폼을 사용하여 대관을 등록하세요"})]}),e.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"신청자 이름"}),e.jsx("input",{type:"text",className:"w-full p-3 border border-gray-200 rounded-xl bg-gray-50",placeholder:"예: 관리자 등록",value:w.name,onChange:r=>B({...w,name:r.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"대관 목적"}),e.jsx("input",{type:"text",className:"w-full p-3 border border-gray-200 rounded-xl bg-gray-50",placeholder:"대관 목적을 입력하세요",value:w.purpose,onChange:r=>B({...w,purpose:r.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"분류"}),e.jsxs("select",{className:"w-full p-3 border border-gray-200 rounded-xl bg-gray-50",value:w.category,onChange:r=>B({...w,category:r.target.value}),children:[e.jsx("option",{value:"class",children:"수업"}),e.jsx("option",{value:"event",children:"행사"}),e.jsx("option",{value:"club",children:"동아리"}),e.jsx("option",{value:"personal",children:"개인"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"시설 선택"}),e.jsxs("select",{className:"w-full p-3 border border-gray-200 rounded-xl bg-gray-50",value:w.facilityId,onChange:r=>B({...w,facilityId:r.target.value}),children:[e.jsx("option",{value:"",children:"시설을 선택해 주세요"}),D.map(r=>{const g=r.bookingPolicy,C=g?.allowOverlap?`(공유사용, 최대 ${g.maxConcurrent||1}팀)`:"(단독사용)";return e.jsxs("option",{value:r.id,children:[r.name," ",C]},r.id)})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"시작일"}),e.jsx("input",{type:"date",className:"w-full p-3 border border-gray-200 rounded-xl bg-gray-50",value:w.startDate,onChange:r=>B({...w,startDate:r.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"종료일"}),e.jsx("input",{type:"date",className:"w-full p-3 border border-gray-200 rounded-xl bg-gray-50",value:w.endDate,onChange:r=>B({...w,endDate:r.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"시작 시간"}),e.jsxs("select",{className:"w-full p-3 border border-gray-200 rounded-xl bg-gray-50",value:w.startTime,onChange:r=>B({...w,startTime:r.target.value}),children:[e.jsx("option",{value:"09:00",children:"09:00"}),e.jsx("option",{value:"10:00",children:"10:00"}),e.jsx("option",{value:"11:00",children:"11:00"}),e.jsx("option",{value:"14:00",children:"14:00"}),e.jsx("option",{value:"15:00",children:"15:00"}),e.jsx("option",{value:"16:00",children:"16:00"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"종료 시간"}),e.jsxs("select",{className:"w-full p-3 border border-gray-200 rounded-xl bg-gray-50",value:w.endTime,onChange:r=>B({...w,endTime:r.target.value}),children:[e.jsx("option",{value:"10:00",children:"10:00"}),e.jsx("option",{value:"11:00",children:"11:00"}),e.jsx("option",{value:"12:00",children:"12:00"}),e.jsx("option",{value:"15:00",children:"15:00"}),e.jsx("option",{value:"16:00",children:"16:00"}),e.jsx("option",{value:"17:00",children:"17:00"})]})]})]}),e.jsxs("div",{className:"mt-4 flex justify-end gap-3",children:[e.jsx("button",{type:"button",className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"취소"}),e.jsx("button",{onClick:U,className:"px-6 py-2 bg-blue-600 text-white rounded-xl hover:bg-blue-700",children:"등록하기"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 bg-orange-50 rounded-lg flex items-center justify-center",children:e.jsx(se,{className:"w-5 h-5 text-orange-600"})}),e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["사용자 대관 신청 대기 (",_.length,")"]})]}),e.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto pr-2",children:_.length>0?_.map(r=>e.jsx(_s,{b:r,onAction:S},r.id)):e.jsx("p",{className:"text-gray-500 text-center py-4",children:"대기중인 신청이 없습니다."})})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-50 rounded-lg flex items-center justify-center",children:e.jsx(xe,{className:"w-5 h-5 text-purple-600"})}),e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["대기중인 프로그램 신청 (",A.length,")"]})]}),e.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto pr-2",children:A.length>0?A.map(r=>{const g=m.find(C=>C.id===r.programId);return e.jsx("div",{className:"p-4 bg-gray-50 rounded-xl transition-shadow hover:shadow-md",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900",children:g?.title||r.programTitle}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["신청자: ",r.userName," | 신청일: ",r.appliedAt?.toDate?.()?.toLocaleDateString()||"N/A"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>T(r.id,"approved"),className:"px-3 py-2 rounded-lg bg-green-100 text-green-700 border border-green-200 text-sm font-medium",children:"승인"}),e.jsx("button",{onClick:()=>T(r.id,"rejected"),className:"px-3 py-2 rounded-lg bg-red-100 text-red-700 border border-red-200 text-sm font-medium",children:"거절"})]})]})},r.id)}):e.jsx("p",{className:"text-gray-500 text-center py-4",children:"대기중인 신청이 없습니다."})})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-50 rounded-lg flex items-center justify-center",children:e.jsx(xe,{className:"w-5 h-5 text-purple-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"프로그램 관리"})]}),e.jsxs("button",{onClick:()=>{n(null),k(h),u(!0)},className:"flex items-center gap-2 text-sm font-medium text-purple-600 hover:text-purple-800 px-4 py-2 rounded-lg hover:bg-purple-50",children:[e.jsx(Xe,{className:"w-4 h-4"})," 새 프로그램 추가"]})]}),e.jsxs("div",{className:"space-y-3",children:[m.map(r=>e.jsx(Ms,{p:r,onEdit:g=>{n(g),k(g),u(!0)},onDelete:g=>i(C=>C.filter(M=>M.id!==g.id))},r.id)),m.length===0&&e.jsx("p",{className:"text-center text-gray-500 py-6",children:"등록된 프로그램이 없습니다."})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-indigo-50 rounded-lg flex items-center justify-center",children:e.jsx(se,{className:"w-5 h-5 text-indigo-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"전체 대관 캘린더"})]}),e.jsx(l.Suspense,{fallback:e.jsx("div",{className:"text-center py-8 text-gray-500",children:"캘린더 로딩 중..."}),children:e.jsx(Ps,{bookings:s,programs:m,view:a,setView:o})})]}),N&&e.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-2xl p-6 w-full max-w-2xl",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:y?"프로그램 수정":"새 프로그램 개설"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"제목"}),e.jsx("input",{type:"text",className:"w-full p-3 border border-gray-200 rounded-xl",value:v.title,onChange:r=>k({...v,title:r.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"강사"}),e.jsx("input",{type:"text",className:"w-full p-3 border border-gray-200 rounded-xl",value:v.instructor,onChange:r=>k({...v,instructor:r.target.value})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"설명"}),e.jsx("textarea",{className:"w-full p-3 border border-gray-200 rounded-xl",rows:3,value:v.description,onChange:r=>k({...v,description:r.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"시작일"}),e.jsx("input",{type:"date",className:"w-full p-3 border border-gray-200 rounded-xl",value:v.startDate,onChange:r=>k({...v,startDate:r.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"종료일"}),e.jsx("input",{type:"date",className:"w-full p-3 border border-gray-200 rounded-xl",value:v.endDate,onChange:r=>k({...v,endDate:r.target.value})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"반복 요일"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:pt.map((r,g)=>e.jsx("button",{type:"button",onClick:()=>k(C=>({...C,scheduleDays:C.scheduleDays.includes(g)?C.scheduleDays.filter(M=>M!==g):[...C.scheduleDays,g]})),className:`p-2 rounded-lg border text-sm font-medium ${v.scheduleDays.includes(g)?"bg-purple-500 text-white border-purple-500":"bg-white hover:bg-gray-100 border-gray-300"} ${R?"":"opacity-50 pointer-events-none"}`,children:r},r))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"시작 시간"}),e.jsx("select",{className:"w-full p-3 border border-gray-200 rounded-xl bg-white",value:v.startTime,onChange:r=>k({...v,startTime:r.target.value}),children:b.map(r=>e.jsx("option",{value:r,children:r},r))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"종료 시간"}),e.jsx("select",{className:"w-full p-3 border border-gray-200 rounded-xl bg-white",value:v.endTime,onChange:r=>k({...v,endTime:r.target.value}),children:b.map(r=>e.jsx("option",{value:r,children:r},r))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"정원"}),e.jsx("input",{type:"number",className:"w-full p-3 border border-gray-200 rounded-xl",value:v.capacity,onChange:r=>k({...v,capacity:parseInt(r.target.value)||0})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"금액"}),e.jsx("input",{type:"number",className:"w-full p-3 border border-gray-200 rounded-xl",value:v.fee||0,onChange:r=>k({...v,fee:parseInt(r.target.value)||0})})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[e.jsx("button",{className:"px-4 py-2 rounded-xl border",onClick:()=>{u(!1),n(null)},children:"취소"}),e.jsx("button",{className:"px-4 py-2 rounded-xl bg-purple-600 text-white",onClick:O,children:y?"수정하기":"개설하기"})]})]})})]})}const Os=({users:t,setUsers:s})=>{const{users:c,loading:x}=Pe(),d=c.length>0?c:t||[],[m,i]=l.useState(!1),[f,D]=l.useState(!1),[p,N]=l.useState(null),[u,y]=l.useState(null),[n,a]=l.useState(null),o={name:"",email:"",phone:"",password:"",role:"user"},[h,v]=l.useState(o),[k,R]=l.useState(""),[b,O]=l.useState(""),[S,T]=l.useState(""),[_,A]=l.useState(""),[E,V]=l.useState(null),[w,B]=l.useState(!1),[U,r]=l.useState(!1),[g,C]=l.useState(""),[M,q]=l.useState("name"),[H]=l.useState("all"),[P,I]=l.useState({key:"name",direction:"asc"}),L=ct();l.useEffect(()=>{f&&setTimeout(()=>{window.recaptchaVerifier||(window.recaptchaVerifier=new Ot(L,"recaptcha-container",{size:"invisible",callback:()=>{}}))},100)},[f,L]);const $=j=>{N(j),v({name:j.name,email:j.email,phone:j.phone||"",password:"",role:j.role}),i(!0)},X=()=>{N(null),v(o),i(!0)},W=()=>{i(!1),N(null)},ge=j=>{a(j),R(j.email),T(j.phone||""),O(""),A(""),V(null),D(!0)},ee=()=>{D(!1),a(null),window.recaptchaVerifier&&window.recaptchaVerifier.clear()},te=j=>{const{name:F,value:Q}=j.target;v(F==="phone"?z=>({...z,[F]:st(Q)}):z=>({...z,[F]:Q}))},oe=async j=>{j.preventDefault(),r(!0);try{if(p){if(d.some(J=>J.email===h.email&&J.id!==p.id)){alert("이미 사용 중인 이메일입니다.");return}const{doc:F,updateDoc:Q,serverTimestamp:z}=await K(async()=>{const{doc:J,updateDoc:de,serverTimestamp:Ie}=await import("./firebase-DnP1Uaxu.js").then(Oe=>Oe.M);return{doc:J,updateDoc:de,serverTimestamp:Ie}},[],import.meta.url),{db:Z}=await K(async()=>{const{db:J}=await Promise.resolve().then(()=>ie);return{db:J}},void 0,import.meta.url),be={name:h.name,email:h.email,phone:h.phone.replace(/-/g,"")||null,role:h.role,updatedAt:z()};await Q(F(Z,"users",p.id),be),s&&s(J=>J.map(de=>de.id===p.id?{...de,name:h.name,email:h.email,phone:h.phone.replace(/-/g,""),role:h.role}:de)),alert("사용자 정보가 수정되었습니다.")}else{if(d.some(z=>z.email===h.email)){alert("이미 등록된 이메일입니다.");return}if(!h.password){alert("신규 사용자는 비밀번호가 필요합니다.");return}const{httpsCallable:F}=await K(async()=>{const{httpsCallable:z}=await import("./firebase-DnP1Uaxu.js").then(Z=>Z.N);return{httpsCallable:z}},[],import.meta.url),{functions:Q}=await K(async()=>{const{functions:z}=await Promise.resolve().then(()=>ie);return{functions:z}},void 0,import.meta.url);try{const Z=await F(Q,"createUserByAdmin")({name:h.name,email:h.email,phone:h.phone.replace(/-/g,"")||null,password:h.password,role:h.role});if(Z.data.success){if(alert(`새 사용자 '${h.name}'이 생성되었습니다.

관리자가 생성한 계정이므로 이메일 인증 없이 바로 로그인할 수 있습니다.`),s){const be={id:Z.data.uid,name:h.name,email:h.email,phone:h.phone.replace(/-/g,""),role:h.role};s(J=>[...J,be])}}else throw new Error(Z.data.error||"사용자 생성에 실패했습니다.")}catch(z){console.warn("Cloud Functions 사용자 생성 실패, 직접 생성 방식으로 전환:",z);const{createUserWithEmailAndPassword:Z,sendEmailVerification:be,updateProfile:J,signOut:de}=await K(async()=>{const{createUserWithEmailAndPassword:me,sendEmailVerification:ue,updateProfile:Fe,signOut:Ve}=await import("./firebase-DnP1Uaxu.js").then(ft=>ft.L);return{createUserWithEmailAndPassword:me,sendEmailVerification:ue,updateProfile:Fe,signOut:Ve}},[],import.meta.url),{doc:Ie,setDoc:Oe,serverTimestamp:Ye}=await K(async()=>{const{doc:me,setDoc:ue,serverTimestamp:Fe}=await import("./firebase-DnP1Uaxu.js").then(Ve=>Ve.M);return{doc:me,setDoc:ue,serverTimestamp:Fe}},[],import.meta.url),{auth:Le,db:bt}=await K(async()=>{const{auth:me,db:ue}=await Promise.resolve().then(()=>ie);return{auth:me,db:ue}},void 0,import.meta.url);if(!Le.currentUser)throw new Error("관리자 로그인이 필요합니다.");const Re=(await Z(Le,h.email,h.password)).user;if(await J(Re,{displayName:h.name||h.email.split("@")[0]}),await Oe(Ie(bt,"users",Re.uid),{name:h.name,email:h.email,phone:h.phone.replace(/-/g,"")||null,role:h.role,isActive:!0,adminCreated:!0,createdAt:Ye(),updatedAt:Ye()}),console.log("관리자가 직접 생성한 사용자이므로 이메일 인증 메일을 발송하지 않습니다."),await de(Le),alert(`새 사용자 '${h.name}'이 생성되었습니다.

⚠️ 새 사용자 생성으로 인해 자동 로그아웃되었습니다.
관리자 계정으로 다시 로그인해주세요.

생성된 사용자는 이메일 인증 없이 바로 로그인할 수 있습니다.`),s){const me={id:Re.uid,name:h.name,email:h.email,phone:h.phone.replace(/-/g,""),role:h.role};s(ue=>[...ue,me])}}}W()}catch(F){console.error("User creation/update error:",F);const Q=je(F);alert(Q)}finally{r(!1)}},ce=j=>{if(j.role==="admin"&&d.filter(F=>F.role==="admin").length<=1){alert("마지막 관리자 계정은 삭제할 수 없습니다.");return}y(j)},ve=async()=>{if(u){try{const{deleteDoc:j,doc:F}=await K(async()=>{const{deleteDoc:z,doc:Z}=await import("./firebase-DnP1Uaxu.js").then(be=>be.M);return{deleteDoc:z,doc:Z}},[],import.meta.url),{db:Q}=await K(async()=>{const{db:z}=await Promise.resolve().then(()=>ie);return{db:z}},void 0,import.meta.url);await j(F(Q,"users",u.id)),alert("사용자가 삭제되었습니다."),s&&s(z=>z.filter(Z=>Z.id!==u.id))}catch(j){console.error("사용자 삭제 오류:",j),alert("사용자 삭제에 실패했습니다.")}y(null)}},Ne=j=>{let F="asc";P&&P.key===j&&P.direction==="asc"&&(F="desc"),I({key:j,direction:F})},De=async()=>{if(!S){alert("휴대폰 번호를 입력하세요.");return}B(!0);try{const j=window.recaptchaVerifier,F=await Lt(L,S,j);V(F),alert("인증 코드를 발송했습니다.")}catch(j){console.error("SMS Error:",j),alert("SMS 인증 코드 요청에 실패했습니다.")}finally{B(!1)}},Ce=async()=>{if(!_){alert("인증 코드를 입력하세요.");return}if(!E){alert("먼저 인증 코드를 요청하세요.");return}B(!0);try{await E.confirm(_),alert("휴대폰 인증이 완료되었습니다.")}catch(j){console.error("Verification Error:",j),alert("인증 코드가 잘못되었습니다.")}finally{B(!1)}},ke=async()=>{if(!k||!b){alert("새 이메일과 현재 비밀번호를 입력하세요.");return}if(L.currentUser){B(!0);try{const j=Rt.credential(L.currentUser.email,b);await Ft(L.currentUser,j),await Vt(L.currentUser,k),alert("이메일 주소가 변경되었습니다. 새 주소로 인증 메일을 확인하세요."),ee()}catch(j){console.error("Email Update Error:",j),alert("이메일 변경에 실패했습니다. 비밀번호를 확인하세요.")}finally{B(!1)}}},pe=l.useMemo(()=>{const j=d.filter(F=>H==="all"||F.role===H).filter(F=>{if(!g)return!0;const Q=g.toLowerCase();return(F[M]?.toLowerCase()||"").includes(Q)});return P!==null&&j.sort((F,Q)=>{const z=F[P.key]||"",Z=Q[P.key]||"";return z<Z?P.direction==="asc"?-1:1:z>Z?P.direction==="asc"?1:-1:0}),j},[d,g,M,H,P]),le=({columnKey:j,title:F})=>e.jsx("th",{onClick:()=>Ne(j),className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 transition-colors",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{children:F}),P?.key===j&&e.jsx(ts,{className:"w-4 h-4 ml-2"})]})});return e.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[e.jsx("div",{id:"recaptcha-container"}),e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"회원 관리"}),e.jsx("p",{className:"text-gray-600",children:"사용자 추가, 수정, 삭제"})]}),e.jsxs("button",{onClick:X,className:"flex items-center space-x-2 bg-blue-500 text-white px-6 py-3 rounded-xl hover:bg-blue-600 transition-all duration-300 font-medium shadow hover:shadow-lg hover:-translate-y-0.5",children:[e.jsx(Xe,{className:"w-5 h-5"}),e.jsx("span",{children:"새 사용자 추가"})]})]}),e.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-4 mb-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(mt,{className:"w-4 h-4 text-gray-400"}),e.jsxs("select",{value:M,onChange:j=>q(j.target.value),className:"border rounded-lg px-2 py-1 text-sm",children:[e.jsx("option",{value:"name",children:"이름"}),e.jsx("option",{value:"email",children:"이메일"}),e.jsx("option",{value:"phone",children:"전화번호"})]}),e.jsx("input",{value:g,onChange:j=>C(j.target.value),placeholder:"검색어 입력",className:"flex-1 outline-none"})]})}),e.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-x-auto",children:x?e.jsxs("div",{className:"flex items-center justify-center p-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"}),e.jsx("span",{className:"ml-3 text-gray-600",children:"사용자 정보를 불러오는 중..."})]}):pe.length===0?e.jsx("div",{className:"flex items-center justify-center p-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-500 text-lg mb-2",children:"등록된 사용자가 없습니다."}),e.jsx("p",{className:"text-gray-400 text-sm",children:"새 사용자 추가 버튼을 클릭해서 사용자를 추가해보세요."})]})}):e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx(le,{columnKey:"name",title:"이름"}),e.jsx(le,{columnKey:"email",title:"이메일"}),e.jsx(le,{columnKey:"phone",title:"전화번호"}),e.jsx(le,{columnKey:"role",title:"권한"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"작업"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:pe.map(j=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:j.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:j.email}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:j.phone}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${j.role==="admin"?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800"}`,children:j.role})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-2",children:[e.jsx("button",{onClick:()=>ge(j),className:"p-2 text-gray-500 hover:text-green-600 rounded-lg transition-all hover:scale-110",children:e.jsx(es,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>$(j),className:"p-2 text-gray-500 hover:text-blue-600 rounded-lg transition-all hover:scale-110",children:e.jsx(Ke,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>ce(j),className:"p-2 text-gray-500 hover:text-red-600 rounded-lg transition-all hover:scale-110",children:e.jsx(We,{className:"w-4 h-4"})})]})]},j.id))})]})}),m&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-2xl p-8 max-w-lg w-full mx-4",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-6",children:p?"사용자 정보 수정":"새 사용자 추가"}),e.jsxs("form",{onSubmit:oe,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"이름"}),e.jsx("input",{type:"text",name:"name",value:h.name,onChange:te,required:!0,className:"w-full p-3 border border-gray-200 rounded-xl"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"이메일"}),e.jsx("input",{type:"email",name:"email",value:h.email,onChange:te,required:!0,className:"w-full p-3 border border-gray-200 rounded-xl"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"전화번호"}),e.jsx("input",{type:"tel",name:"phone",value:h.phone,onChange:te,className:"w-full p-3 border border-gray-200 rounded-xl"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["비밀번호 ",p&&"(변경시에만 입력)"]}),e.jsx("input",{type:"password",name:"password",value:h.password,onChange:te,className:"w-full p-3 border border-gray-200 rounded-xl"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"권한"}),e.jsxs("select",{name:"role",value:h.role,onChange:te,className:"w-full p-3 border border-gray-200 rounded-xl bg-white",children:[e.jsx("option",{value:"user",children:"User"}),e.jsx("option",{value:"admin",children:"Admin"})]})]}),e.jsxs("div",{className:"flex space-x-3 mt-6",children:[e.jsx("button",{type:"button",onClick:W,className:"flex-1 py-3 px-4 border rounded-xl hover:bg-gray-50 font-medium transition-colors",children:"취소"}),e.jsx("button",{type:"submit",className:"flex-1 py-3 px-4 bg-blue-500 text-white rounded-xl hover:bg-blue-600 font-medium transition-colors",children:"저장"})]})]})]})}),f&&n&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-2xl p-8 max-w-lg w-full mx-4 space-y-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900",children:["계정 설정: ",n.name]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-semibold text-gray-800",children:"휴대폰 인증"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"tel",value:S,onChange:j=>T(st(j.target.value)),placeholder:"휴대폰 번호",className:"flex-1 p-3 border border-gray-200 rounded-xl"}),e.jsx("button",{onClick:De,disabled:w,className:"py-3 px-4 bg-gray-200 rounded-xl hover:bg-gray-300 font-medium transition-colors disabled:opacity-50",children:w?"전송중...":"인증코드 받기"})]}),E&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"text",value:_,onChange:j=>A(j.target.value),placeholder:"인증 코드 6자리",className:"flex-1 p-3 border border-gray-200 rounded-xl"}),e.jsx("button",{onClick:Ce,disabled:w,className:"py-3 px-4 bg-green-500 text-white rounded-xl hover:bg-green-600 font-medium transition-colors disabled:opacity-50",children:w?"확인중...":"인증하기"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-semibold text-gray-800",children:"이메일 주소 변경"}),e.jsx("input",{type:"email",value:k,onChange:j=>R(j.target.value),placeholder:"새 이메일 주소",className:"w-full p-3 border border-gray-200 rounded-xl"}),e.jsx("input",{type:"password",value:b,onChange:j=>O(j.target.value),placeholder:"현재 비밀번호",className:"w-full p-3 border border-gray-200 rounded-xl"}),e.jsx("button",{onClick:ke,disabled:w,className:"w-full py-3 px-4 bg-blue-500 text-white rounded-xl hover:bg-blue-600 font-medium transition-colors disabled:opacity-50",children:w?"변경중...":"이메일 변경"})]}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsx("button",{type:"button",onClick:ee,className:"py-3 px-6 border rounded-xl hover:bg-gray-50 font-medium transition-colors",children:"닫기"})})]})}),u&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-2xl p-8 max-w-md w-full mx-4",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"사용자 삭제 확인"}),e.jsxs("p",{className:"text-gray-600 mb-6",children:["정말로 ",e.jsx("strong",{className:"text-red-600",children:u.name})," 사용자를 삭제하시겠습니까?"]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:()=>y(null),className:"flex-1 py-3 px-4 border rounded-xl hover:bg-gray-50 font-medium transition-colors",children:"취소"}),e.jsx("button",{onClick:ve,className:"flex-1 py-3 px-4 bg-red-500 text-white rounded-xl hover:bg-red-600 font-medium transition-colors",children:"삭제"})]})]})})]})},Ls=()=>{const{facilities:t}=Pe(),[s,c]=l.useState(!1),[x,d]=l.useState(null),m={name:"",type:"gym",capacity:1,bufferMinutes:0,bookingPolicy:{allowOverlap:!1,maxConcurrent:1,timeSlotMinutes:60}},[i,f]=l.useState(m),D=()=>{d(null),f(m),c(!0)},p=a=>{d(a),f({...a,bookingPolicy:a.bookingPolicy||{allowOverlap:!1,maxConcurrent:1,timeSlotMinutes:60}}),c(!0)},N=()=>{c(!1),d(null)},u=a=>{const{name:o,value:h,type:v}=a.target,k=v==="number";f(R=>({...R,[o]:k?Number(h):h}))},y=async a=>{if(a.preventDefault(),!i.name||i.capacity<=0){alert("시설 이름과 수용 인원을 확인해주세요.");return}try{if(x){const o=ae(Y,"facilities",x.id);await Ht(o,i),alert("시설 정보가 성공적으로 수정되었습니다.")}else await zt(ye(Y,"facilities"),i),alert("새 시설이 추가되었습니다.");N()}catch(o){console.error("Error saving facility: ",o),alert("처리 중 오류가 발생했습니다.")}},n=async a=>{if(window.confirm("정말로 이 시설을 삭제하시겠습니까? 이 작업은 되돌릴 수 없습니다."))try{await Bt(ae(Y,"facilities",a)),alert("시설이 삭제되었습니다.")}catch(o){console.error("Error deleting facility: ",o),alert("삭제 중 오류가 발생했습니다.")}};return e.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"시설 관리"}),e.jsx("p",{className:"text-gray-600",children:"체육관 시설을 추가, 수정, 삭제합니다."})]}),e.jsxs("button",{onClick:D,className:"flex items-center space-x-2 bg-blue-500 text-white px-6 py-3 rounded-xl hover:bg-blue-600 transition-all duration-300 font-medium shadow hover:shadow-lg hover:-translate-y-0.5",children:[e.jsx(Xe,{className:"w-5 h-5"}),e.jsx("span",{children:"새 시설 추가"})]})]}),e.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"이름"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"종류"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"수용 인원"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"버퍼(분)"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"중복 정책"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"작업"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(a=>{const o=a.bookingPolicy,h=o?.allowOverlap?`🔄 중복허용 (최대${o.maxConcurrent||1}팀)`:"🚫 단독사용";return e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:a.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:a.type}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:a.capacity}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:a.bufferMinutes}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${o?.allowOverlap?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:h})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-2",children:[e.jsx("button",{onClick:()=>p(a),className:"p-2 text-gray-500 hover:text-blue-600 rounded-lg transition-all hover:scale-110",children:e.jsx(Ke,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>n(a.id),className:"p-2 text-gray-500 hover:text-red-600 rounded-lg transition-all hover:scale-110",children:e.jsx(We,{className:"w-4 h-4"})})]})]},a.id)})})]})}),s&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-2xl p-8 max-w-lg w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-6",children:x?"시설 정보 수정":"새 시설 추가"}),e.jsxs("form",{onSubmit:y,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"시설 이름"}),e.jsx("input",{type:"text",name:"name",value:i.name,onChange:u,required:!0,className:"w-full p-3 border border-gray-200 rounded-xl"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"수용 인원"}),e.jsx("input",{type:"number",name:"capacity",value:i.capacity,onChange:u,required:!0,min:1,className:"w-full p-3 border border-gray-200 rounded-xl"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"버퍼 시간 (분)"}),e.jsx("input",{type:"number",name:"bufferMinutes",value:i.bufferMinutes,onChange:u,required:!0,min:0,className:"w-full p-3 border border-gray-200 rounded-xl"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"시설 종류"}),e.jsxs("select",{name:"type",value:i.type,onChange:u,className:"w-full p-3 border border-gray-200 rounded-xl bg-white",children:[e.jsx("option",{value:"gym",children:"체육관"}),e.jsx("option",{value:"court",children:"코트"}),e.jsx("option",{value:"field",children:"운동장"}),e.jsx("option",{value:"pool",children:"수영장"}),e.jsx("option",{value:"room",children:"다목적실"})]})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-xl",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-800 mb-3",children:"중복 사용 설정"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",checked:i.bookingPolicy?.allowOverlap||!1,onChange:a=>f(o=>({...o,bookingPolicy:{...o.bookingPolicy,allowOverlap:a.target.checked,maxConcurrent:a.target.checked?o.bookingPolicy?.maxConcurrent||2:1}})),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"중복 사용 허용 (같은 시간에 여러 팀 사용 가능)"})]}),i.bookingPolicy?.allowOverlap&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"최대 동시 사용 팀"}),e.jsx("input",{type:"number",min:"2",max:"10",value:i.bookingPolicy?.maxConcurrent||2,onChange:a=>f(o=>({...o,bookingPolicy:{...o.bookingPolicy,maxConcurrent:parseInt(a.target.value)}})),className:"w-full p-3 border border-gray-200 rounded-xl"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"같은 시간에 이용할 수 있는 최대 팀 수"})]})]})]}),e.jsxs("div",{className:"flex space-x-3 mt-6",children:[e.jsx("button",{type:"button",onClick:N,className:"flex-1 py-3 px-4 border rounded-xl hover:bg-gray-50 font-medium transition-colors",children:"취소"}),e.jsx("button",{type:"submit",className:"flex-1 py-3 px-4 bg-blue-500 text-white rounded-xl hover:bg-blue-600 font-medium transition-colors",children:x?"수정하기":"추가하기"})]})]})]})})]})},Rs={success:e.jsx(ns,{className:"w-6 h-6 text-green-500"}),error:e.jsx(as,{className:"w-6 h-6 text-red-500"}),warning:e.jsx(rs,{className:"w-6 h-6 text-yellow-500"}),info:e.jsx(ss,{className:"w-6 h-6 text-blue-500"})},Fs=({notification:t,onRemove:s})=>e.jsx("div",{className:"bg-white rounded-xl shadow-lg pointer-events-auto ring-1 ring-black ring-opacity-5 overflow-hidden mb-4 animate-on-load",style:{animationName:"fadeInRight"},children:e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:Rs[t.type]}),e.jsx("div",{className:"ml-3 w-0 flex-1 pt-0.5",children:e.jsx("p",{className:"text-sm font-medium text-gray-900",children:t.message})}),e.jsx("div",{className:"ml-4 flex-shrink-0 flex",children:e.jsxs("button",{onClick:()=>s(t.id),className:"bg-white rounded-md inline-flex text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[e.jsx("span",{className:"sr-only",children:"Close"}),e.jsx(dt,{className:"h-5 w-5","aria-hidden":"true"})]})})]})})}),Vs=()=>{const{notifications:t,removeNotification:s}=$e();return e.jsx("div",{className:"fixed inset-0 flex items-end justify-end px-4 py-6 pointer-events-none sm:p-6 z-50",children:e.jsx("div",{className:"w-full max-w-sm",children:t.map(c=>e.jsx(Fs,{notification:c,onRemove:s},c.id))})})};function Bs(){const{user:t,login:s,logout:c,signup:x,adminLogin:d,googleLogin:m,loading:i}=os(),{loading:f,syncing:D,bookings:p,setBookings:N,programs:u,setPrograms:y,applications:n,setApplications:a,users:o,setUsers:h,facilities:v}=Pe(),[k,R]=l.useState("dashboard");l.useEffect(()=>{t&&!f&&R("dashboard")},[t,f]);const b=async(E,V)=>{try{if(!E.trim()||!V.trim())throw new Error("이메일과 비밀번호를 입력해주세요.");return await s(E,V),[!0,null]}catch(w){return console.error("Login failed:",w),[!1,je(w)]}},O=async(E,V)=>{try{if(!E.trim()||!V.trim())throw new Error("이메일과 비밀번호를 입력해주세요.");return await d(E,V),[!0,null]}catch(w){return console.error("Admin login failed:",w),[!1,je(w)]}},S=async E=>{try{const{name:V,email:w,password:B}=E;if(!V?.trim())throw new Error("이름을 입력해주세요.");if(!w?.trim())throw new Error("이메일을 입력해주세요.");if(!B?.trim())throw new Error("비밀번호를 입력해주세요.");return await x(E),[!0,"회원가입이 완료되었습니다. 이메일 인증을 확인해주세요."]}catch(V){return console.error("Signup failed:",V),[!1,je(V)]}},T=async()=>{try{return await m(),[!0,null]}catch(E){return console.error("Google login failed:",E),[!1,je(E)]}},_=async()=>{await c(),R("dashboard")},A=()=>{if(!t)return null;try{switch(k){case"dashboard":return e.jsx(lt,{currentUser:t,bookings:p,applications:n,programs:u,setActiveTab:R,syncing:D});case"booking":return e.jsx(ks,{currentUser:t,bookings:p,setBookings:N,syncing:D});case"program":return e.jsx(As,{currentUser:t,programs:u,setPrograms:y,applications:n,setApplications:a});case"admin":return e.jsx(Is,{currentUser:t,bookings:p,setBookings:N,applications:n,setApplications:a,programs:u,setPrograms:y,users:o,facilities:v});case"userManagement":return e.jsx(Os,{users:o,setUsers:h});case"facilities":return e.jsx(Ls,{});default:return e.jsx(lt,{currentUser:t,bookings:p,applications:n,programs:u,setActiveTab:R,syncing:D})}}catch(E){return console.error("Component rendering error:",E),e.jsx("div",{className:"min-h-96 bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"화면을 불러오는 중 오류가 발생했습니다"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"다른 메뉴를 선택하거나 페이지를 새로고침해주세요."}),e.jsxs("div",{className:"space-x-2",children:[e.jsx("button",{onClick:()=>R("dashboard"),className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:"대시보드로 이동"}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600",children:"새로고침"})]})]})})}};return f||i?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"}),e.jsx("p",{className:"text-gray-600",children:"로딩 중..."})]})}):e.jsxs(e.Fragment,{children:[e.jsx(Vs,{}),t?e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(xs,{currentUser:t,activeTab:k,setActiveTab:R,onLogout:_}),e.jsx("main",{children:A()})]}):e.jsx(us,{onLogin:b,onSignup:S,onAdminLogin:O,onGoogleLogin:T})]})}const ot=document.getElementById("root");ot?yt.createRoot(ot).render(e.jsx(jt.StrictMode,{children:e.jsx(cs,{children:e.jsx(Bs,{})})})):console.error("Failed to find the root element");
