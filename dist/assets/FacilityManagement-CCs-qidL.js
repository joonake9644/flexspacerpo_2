import{r as d,j as e}from"./react-C1G-q6RG.js";import{b as k,d as x}from"./index-VDPl71_X.js";import{H as C,m as p,I as P,J as M,w as S}from"./firebase-CpY9aKCX.js";import{r as O,s as F,t as E}from"./icons-DJqNYe3e.js";const R=()=>{const{facilities:h}=k(),[b,i]=d.useState(!1),[l,c]=d.useState(null),m={name:"",type:"gym",capacity:1,bufferMinutes:0,bookingPolicy:{allowOverlap:!1,maxConcurrent:1,timeSlotMinutes:60}},[s,r]=d.useState(m),g=()=>{c(null),r(m),i(!0)},y=t=>{c(t),r({...t,bookingPolicy:t.bookingPolicy||{allowOverlap:!1,maxConcurrent:1,timeSlotMinutes:60}}),i(!0)},u=()=>{i(!1),c(null)},n=t=>{const{name:a,value:o,type:w}=t.target,N=w==="number";r(v=>({...v,[a]:N?Number(o):o}))},f=async t=>{if(t.preventDefault(),!s.name||s.capacity<=0){alert("ì‹œì„¤ ì´ë¦„ê³¼ ìˆ˜ìš© ì¸ì›ì„ í™•ì¸í•´ì£¼ì„¸ìš”.");return}try{if(l){const a=p(x,"facilities",l.id);await P(a,s),alert("ì‹œì„¤ ì •ë³´ê°€ ì„±ê³µì ìœ¼ë¡œ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.")}else await M(S(x,"facilities"),s),alert("ìƒˆ ì‹œì„¤ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.");u()}catch(a){console.error("Error saving facility: ",a),alert("ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.")}},j=async t=>{if(window.confirm("ì •ë§ë¡œ ì´ ì‹œì„¤ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ? ì´ ì‘ì—…ì€ ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."))try{await C(p(x,"facilities",t)),alert("ì‹œì„¤ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.")}catch(a){console.error("Error deleting facility: ",a),alert("ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.")}};return e.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"ì‹œì„¤ ê´€ë¦¬"}),e.jsx("p",{className:"text-gray-600",children:"ì²´ìœ¡ê´€ ì‹œì„¤ì„ ì¶”ê°€, ìˆ˜ì •, ì‚­ì œí•©ë‹ˆë‹¤."})]}),e.jsxs("button",{onClick:g,className:"flex items-center space-x-2 bg-blue-500 text-white px-6 py-3 rounded-xl hover:bg-blue-600 transition-all duration-300 font-medium shadow hover:shadow-lg hover:-translate-y-0.5",children:[e.jsx(O,{className:"w-5 h-5"}),e.jsx("span",{children:"ìƒˆ ì‹œì„¤ ì¶”ê°€"})]})]}),e.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ì´ë¦„"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ì¢…ë¥˜"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ìˆ˜ìš© ì¸ì›"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ë²„í¼(ë¶„)"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ì¤‘ë³µ ì •ì±…"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ì‘ì—…"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:h.map(t=>{const a=t.bookingPolicy,o=a?.allowOverlap?`ğŸ”„ ì¤‘ë³µí—ˆìš© (ìµœëŒ€${a.maxConcurrent||1}íŒ€)`:"ğŸš« ë‹¨ë…ì‚¬ìš©";return e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:t.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:t.type}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:t.capacity}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:t.bufferMinutes}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${a?.allowOverlap?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:o})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-2",children:[e.jsx("button",{onClick:()=>y(t),className:"p-2 text-gray-500 hover:text-blue-600 rounded-lg transition-all hover:scale-110",children:e.jsx(F,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>j(t.id),className:"p-2 text-gray-500 hover:text-red-600 rounded-lg transition-all hover:scale-110",children:e.jsx(E,{className:"w-4 h-4"})})]})]},t.id)})})]})}),b&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-2xl p-8 max-w-lg w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-6",children:l?"ì‹œì„¤ ì •ë³´ ìˆ˜ì •":"ìƒˆ ì‹œì„¤ ì¶”ê°€"}),e.jsxs("form",{onSubmit:f,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ì‹œì„¤ ì´ë¦„"}),e.jsx("input",{type:"text",name:"name",value:s.name,onChange:n,required:!0,className:"w-full p-3 border border-gray-200 rounded-xl"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ìˆ˜ìš© ì¸ì›"}),e.jsx("input",{type:"number",name:"capacity",value:s.capacity,onChange:n,required:!0,min:1,className:"w-full p-3 border border-gray-200 rounded-xl"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ë²„í¼ ì‹œê°„ (ë¶„)"}),e.jsx("input",{type:"number",name:"bufferMinutes",value:s.bufferMinutes,onChange:n,required:!0,min:0,className:"w-full p-3 border border-gray-200 rounded-xl"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ì‹œì„¤ ì¢…ë¥˜"}),e.jsxs("select",{name:"type",value:s.type,onChange:n,className:"w-full p-3 border border-gray-200 rounded-xl bg-white",children:[e.jsx("option",{value:"gym",children:"ì²´ìœ¡ê´€"}),e.jsx("option",{value:"court",children:"ì½”íŠ¸"}),e.jsx("option",{value:"field",children:"ìš´ë™ì¥"}),e.jsx("option",{value:"pool",children:"ìˆ˜ì˜ì¥"}),e.jsx("option",{value:"room",children:"ë‹¤ëª©ì ì‹¤"})]})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-xl",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-800 mb-3",children:"ì¤‘ë³µ ì‚¬ìš© ì„¤ì •"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",checked:s.bookingPolicy?.allowOverlap||!1,onChange:t=>r(a=>({...a,bookingPolicy:{...a.bookingPolicy,allowOverlap:t.target.checked,maxConcurrent:t.target.checked?a.bookingPolicy?.maxConcurrent||2:1}})),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"ì¤‘ë³µ ì‚¬ìš© í—ˆìš© (ê°™ì€ ì‹œê°„ì— ì—¬ëŸ¬ íŒ€ ì‚¬ìš© ê°€ëŠ¥)"})]}),s.bookingPolicy?.allowOverlap&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ìµœëŒ€ ë™ì‹œ ì‚¬ìš© íŒ€"}),e.jsx("input",{type:"number",min:"2",max:"10",value:s.bookingPolicy?.maxConcurrent||2,onChange:t=>r(a=>({...a,bookingPolicy:{...a.bookingPolicy,maxConcurrent:parseInt(t.target.value)}})),className:"w-full p-3 border border-gray-200 rounded-xl"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"ê°™ì€ ì‹œê°„ì— ì´ìš©í•  ìˆ˜ ìˆëŠ” ìµœëŒ€ íŒ€ ìˆ˜"})]})]})]}),e.jsxs("div",{className:"flex space-x-3 mt-6",children:[e.jsx("button",{type:"button",onClick:u,className:"flex-1 py-3 px-4 border rounded-xl hover:bg-gray-50 font-medium transition-colors",children:"ì·¨ì†Œ"}),e.jsx("button",{type:"submit",className:"flex-1 py-3 px-4 bg-blue-500 text-white rounded-xl hover:bg-blue-600 font-medium transition-colors",children:l?"ìˆ˜ì •í•˜ê¸°":"ì¶”ê°€í•˜ê¸°"})]})]})]})})]})};export{R as default};
