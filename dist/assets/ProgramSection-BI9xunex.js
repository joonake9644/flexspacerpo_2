import{r as i,j as e}from"./react-C1G-q6RG.js";import{v as u}from"./firebase-C3mMOVup.js";import{f}from"./firebase-functions-NK7uq-RQ.js";import{u as g}from"./index-BZlGQlT4.js";import{j as y}from"./icons-CN_tAE-L.js";const j=u(f,"createProgramApplication"),b=["��","��","ȭ","��","��","��","��"],w=s=>{const t=new Date;t.setHours(0,0,0,0);const r=new Date(s.startDate);r.setHours(0,0,0,0);const l=new Date(s.endDate);return l.setHours(0,0,0,0),t>l?{text:"����",dDay:null}:t>=r&&t<=l?{text:"������",dDay:null}:{text:"������",dDay:Math.ceil((r.getTime()-t.getTime())/(1e3*60*60*24))}},N=s=>`${(s.scheduleDays||[]).sort().map(t=>b[t]).join(", ")} ${s.startTime}-${s.endTime}`,v=i.memo(({p:s,status:t,onApply:r,applying:l})=>e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:s.title}),t.dDay!==null&&e.jsxs("span",{className:"px-2.5 py-1 rounded-full text-xs font-semibold bg-red-500 text-white",children:["D-",t.dDay]})]}),e.jsxs("div",{className:"flex items-center space-x-6 text-sm text-gray-500 flex-wrap",children:[e.jsxs("span",{children:["����: ",s.instructor]}),e.jsxs("span",{children:["�Ⱓ: ",s.startDate," ~ ",s.endDate]}),e.jsxs("span",{children:["����: ",N(s)]}),e.jsxs("span",{children:["���: ",s.fee?`${s.fee.toLocaleString()}��`:"���� / Free"]}),e.jsxs("span",{children:["����: ",s.enrolled??0," / ",s.capacity]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${t.text==="����"?"bg-gray-100 text-gray-800":"bg-green-100 text-green-800"}`,children:t.text}),t.text!=="����"&&e.jsx("button",{disabled:l,onClick:()=>r(s.id),className:"px-4 py-2 rounded-xl bg-purple-600 text-white hover:bg-purple-700",children:"��û�ϱ�"})]})]})})),P=({currentUser:s,programs:t,applications:r,setApplications:l})=>{const{showNotification:n}=g(),[o,m]=i.useState(""),[p,d]=i.useState(null),x=i.useMemo(()=>t.filter(a=>a.title.toLowerCase().includes(o.toLowerCase())),[t,o]),h=i.useCallback(async a=>{d(a);try{const c=await j({programId:a});c?.data?.success?n("���α׷� ��û�� �����Ǿ����ϴ�.","success"):n(`��û ����: ${c?.data?.message||"�� �� ���� ����"}`,"error")}catch(c){n(`��û ����: ${c?.message||"�� �� ���� ����"}`,"error")}finally{d(null)}},[n]);return e.jsxs("div",{className:"max-w-6xl mx-auto p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"���α׷� / Program"}),e.jsx("p",{className:"text-gray-600",children:"���ϴ� ���α׷��� ã�� ��û�ϼ���."})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-4 flex items-center gap-2",children:[e.jsx(y,{className:"w-5 h-5 text-gray-400"}),e.jsx("input",{value:o,onChange:a=>m(a.target.value),placeholder:"���α׷� �˻�",className:"flex-1 outline-none"})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 divide-y",children:[x.map(a=>e.jsx(v,{p:a,status:w(a),applying:!!p,onApply:h},a.id)),x.length===0&&e.jsx("div",{className:"p-6 text-center text-gray-500",children:"���ǿ� �´� ���α׷��� �����ϴ�."})]})]})};export{P as default};
