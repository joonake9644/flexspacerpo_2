const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/DashboardCalendar-Bl7a9Xpy.js","assets/react-C1G-q6RG.js","assets/icons-CN_tAE-L.js"])))=>i.map(i=>d[i]);
import{_ as b}from"./index-BZlGQlT4.js";import{r as n,j as e}from"./react-C1G-q6RG.js";import{e as N,i as f,f as w}from"./icons-CN_tAE-L.js";import"./firebase-C3mMOVup.js";const v=n.lazy(()=>b(()=>import("./DashboardCalendar-Bl7a9Xpy.js"),__vite__mapDeps([0,1,2]))),D=t=>{const a=new Date;a.setHours(0,0,0,0);const r=new Date(t.startDate);r.setHours(0,0,0,0);const d=new Date(t.endDate);return d.setHours(0,0,0,0),a>d?{text:"종료",dDay:null}:a>=r&&a<=d?{text:"진행중",dDay:null}:{text:"모집중",dDay:Math.ceil((r.getTime()-a.getTime())/(1e3*60*60*24))}},m=({status:t})=>{const a={approved:{text:"승인됨 / Approved",color:"bg-green-100 text-green-800"},pending:{text:"대기중 / Pending",color:"bg-orange-100 text-orange-800"},rejected:{text:"거절됨 / Rejected",color:"bg-red-100 text-red-800"},completed:{text:"종료 / Ended",color:"bg-gray-100 text-gray-800"}},{text:r,color:d}=a[t];return e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${d}`,children:r})},h=["일","월","화","수","목","금","토"],A=t=>{const{startDate:a,endDate:r,recurrenceRule:d}=t;if(a===r)return a;let o="";return d&&d.days.length>0&&(o=` (매주 / Every ${d.days.sort().map(i=>h[i]).join(", ")})`),`${a} ~ ${r}${o}`},P=t=>`${t.scheduleDays.sort().map(r=>h[r]).join(",")} ${t.startTime}-${t.endTime}`,B=({currentUser:t,bookings:a,applications:r,programs:d,setActiveTab:o})=>{const i=n.useMemo(()=>a.filter(s=>s.userId===t.id).sort((s,l)=>new Date(l.startDate).getTime()-new Date(s.startDate).getTime()),[a,t.id]),c=n.useMemo(()=>r.filter(s=>s.userId===t.id).sort((s,l)=>new Date(l.appliedAt).getTime()-new Date(s.appliedAt).getTime()),[r,t.id]),g=n.useMemo(()=>a.filter(s=>s.status==="pending"),[a]),p=n.useMemo(()=>r.filter(s=>s.status==="pending"),[r]),[j,u]=n.useState("month");return e.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:t.role==="admin"?"관리자 대시보드 / Admin Dashboard":"마이 대시보드 / My Dashboard"}),e.jsx("p",{className:"text-gray-600",children:t.role==="admin"?"체육관 운영 현황을 한눈에 확인하세요 / Check gym operational status at a glance":"나의 예약과 프로그램 신청 현황입니다 / View your booking and program application status"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:t.role==="admin"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-100 transition-all duration-300 hover:shadow-lg hover:-translate-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"대기중인 대관 / Pending Bookings"}),e.jsx("div",{className:"w-12 h-12 bg-orange-50 rounded-xl flex items-center justify-center",children:e.jsx(N,{className:"w-6 h-6 text-orange-600"})})]}),e.jsx("p",{className:"text-3xl font-bold text-orange-600",children:g.length})]}),e.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-100 transition-all duration-300 hover:shadow-lg hover:-translate-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"대기중인 프로그램 신청 / Pending Applications"}),e.jsx("div",{className:"w-12 h-12 bg-purple-50 rounded-xl flex items-center justify-center",children:e.jsx(f,{className:"w-6 h-6 text-purple-600"})})]}),e.jsx("p",{className:"text-3xl font-bold text-purple-600",children:p.length})]}),e.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-100 transition-all duration-300 hover:shadow-lg hover:-translate-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"운영중인 프로그램 / Active Programs"}),e.jsx("div",{className:"w-12 h-12 bg-green-50 rounded-xl flex items-center justify-center",children:e.jsx(w,{className:"w-6 h-6 text-green-600"})})]}),e.jsx("p",{className:"text-3xl font-bold text-green-600",children:d.length})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-100",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"나의 대관 / My Bookings"}),e.jsx("p",{className:"text-3xl font-bold text-blue-600",children:i.length})]}),e.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-100",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"나의 프로그램 신청 / My Applications"}),e.jsx("p",{className:"text-3xl font-bold text-purple-600",children:c.length})]}),e.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-100",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"운영중인 프로그램 / Active Programs"}),e.jsx("p",{className:"text-3xl font-bold text-green-600",children:d.length})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"최근 대관 / Recent Bookings"}),e.jsxs("div",{className:"space-y-3",children:[(t.role==="admin"?a.slice(0,5):i.slice(0,5)).map(s=>e.jsx("div",{className:"p-3 bg-gray-50 rounded-xl transition-colors duration-200 hover:bg-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:s.purpose}),e.jsxs("p",{className:"text-sm text-gray-600",children:[s.organization?`${s.organization} | `:"",A(s)," ",s.startTime,"-",s.endTime]}),t.role==="admin"&&e.jsxs("p",{className:"text-sm text-gray-500",children:["신청자 / Applicant: ",s.userName]})]}),e.jsx(m,{status:s.status})]})},s.id)),t.role!=="admin"&&i.length===0&&e.jsx("p",{className:"text-center text-gray-500 py-6",children:"대관 신청 내역이 없습니다. / No booking history."})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:t.role==="admin"?"프로그램 신청 현황 / Program Applications":"내 프로그램 / My Programs"}),t.role==="user"&&c.length>5&&e.jsx("button",{onClick:()=>o("program"),className:"text-sm font-medium text-purple-600 hover:underline",children:"전체 보기 / View All"})]}),e.jsxs("div",{className:"space-y-3",children:[(t.role==="admin"?r.slice(0,5):c.slice(0,5)).map(s=>{const l=d.find(y=>y.id===s.programId),x=l?D(l):null;return e.jsx("div",{className:"p-3 bg-gray-50 rounded-xl transition-colors duration-200 hover:bg-gray-100",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-1",children:[e.jsx("p",{className:"font-medium text-gray-900",children:s.programTitle}),x&&x.dDay!==null&&e.jsxs("span",{className:"bg-red-500 text-white text-xs font-bold px-2.5 py-1 rounded-full",children:["D-",x.dDay]})]}),l&&e.jsxs("div",{className:"text-sm text-gray-600 mt-1 space-y-1",children:[e.jsxs("p",{children:["강사 / Instructor: ",l.instructor," | 기간 / Period: ",l.startDate," ~ ",l.endDate]}),e.jsxs("p",{children:["일정 / Schedule: ",P(l)," | 비용 / Fee: ",l.fee?`${l.fee.toLocaleString()}원`:"무료 / Free"]}),e.jsxs("p",{children:["정원 / Capacity: ",l.enrolled??0," / ",l.capacity]})]}),t.role==="admin"&&e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["신청자 / Applicant: ",s.userName," | 신청일 / Applied At: ",s.appliedAt]})]}),e.jsx(m,{status:s.status})]})},s.id)}),t.role!=="admin"&&c.length===0&&e.jsx("p",{className:"text-center text-gray-500 py-6",children:"프로그램 신청 내역이 없습니다. / No program application history."})]})]})]}),e.jsxs("div",{id:"dashboard-calendar-section",className:"mt-6 bg-white rounded-2xl shadow-sm border border-gray-100 p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"전체 일정 캘린더 / Full Schedule Calendar"}),e.jsx(n.Suspense,{fallback:e.jsx("div",{className:"text-gray-500",children:"캘린더 로딩 중..."}),children:e.jsx(v,{bookings:t.role==="admin"?a:i,programs:d,view:j,setView:u})})]})]})};export{B as default};
