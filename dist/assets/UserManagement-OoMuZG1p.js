import{r as n,j as e}from"./react-C1G-q6RG.js";import{k as K,j as z,l as L,m as O,A as P}from"./icons-CN_tAE-L.js";const H=({users:o,setUsers:p})=>{const[k,u]=n.useState(!1),[i,b]=n.useState(null),[m,g]=n.useState(null),w={name:"",email:"",phone:"",password:"",role:"user"},[l,j]=n.useState(w),[x,C]=n.useState(""),[f,S]=n.useState("name"),[y,R]=n.useState("all"),[a,F]=n.useState({key:"name",direction:"asc"}),D=t=>{b(t),j({name:t.name,email:t.email,phone:t.phone||"",password:"",role:t.role}),u(!0)},M=()=>{b(null),j(w),u(!0)},N=()=>{u(!1),b(null)},d=t=>{const{name:s,value:r}=t.target;j(c=>({...c,[s]:r}))},T=t=>{if(t.preventDefault(),i){if(o.some(s=>s.email===l.email&&s.id!==i.id)){alert("이미 사용 중인 이메일입니다.");return}p(o.map(s=>s.id===i.id?{...s,name:l.name,email:l.email,phone:l.phone.replace(/-/g,""),role:l.role,...l.password&&{password:l.password}}:s)),alert("사용자 정보가 수정되었습니다.")}else{if(o.some(r=>r.email===l.email)){alert("이미 등록된 이메일입니다.");return}if(!l.password){alert("신규 사용자는 비밀번호가 필요합니다.");return}const s={id:`user-${Date.now()}`,name:l.name,email:l.email,phone:l.phone.replace(/-/g,""),password:l.password,role:l.role};p(r=>[...r,s]),alert("새 사용자가 추가되었습니다.")}N()},U=t=>{if(t.role==="admin"&&o.filter(s=>s.role==="admin").length<=1){alert("마지막 관리자 계정은 삭제할 수 없습니다.");return}g(t)},E=()=>{m&&(p(o.filter(t=>t.id!==m.id)),g(null))},A=t=>{let s="asc";a&&a.key===t&&a.direction==="asc"&&(s="desc"),F({key:t,direction:s})},q=n.useMemo(()=>{let t=o.filter(s=>y==="all"||s.role===y).filter(s=>{if(!x)return!0;const r=x.toLowerCase();return(s[f]?.toLowerCase()||"").includes(r)});return a!==null&&t.sort((s,r)=>{const c=s[a.key]||"",v=r[a.key]||"";return c<v?a.direction==="asc"?-1:1:c>v?a.direction==="asc"?1:-1:0}),t},[o,x,f,y,a]),h=({columnKey:t,title:s})=>e.jsx("th",{onClick:()=>A(t),className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 transition-colors",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{children:s}),a?.key===t&&e.jsx(P,{className:"w-4 h-4 ml-2"})]})});return e.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"회원 관리"}),e.jsx("p",{className:"text-gray-600",children:"사용자 추가, 수정, 삭제"})]}),e.jsxs("button",{onClick:M,className:"flex items-center space-x-2 bg-blue-500 text-white px-6 py-3 rounded-xl hover:bg-blue-600 transition-all duration-300 font-medium shadow hover:shadow-lg hover:-translate-y-0.5",children:[e.jsx(K,{className:"w-5 h-5"}),e.jsx("span",{children:"새 사용자 추가"})]})]}),e.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-4 mb-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(z,{className:"w-4 h-4 text-gray-400"}),e.jsxs("select",{value:f,onChange:t=>S(t.target.value),className:"border rounded-lg px-2 py-1 text-sm",children:[e.jsx("option",{value:"name",children:"이름"}),e.jsx("option",{value:"email",children:"이메일"}),e.jsx("option",{value:"phone",children:"전화번호"})]}),e.jsx("input",{value:x,onChange:t=>C(t.target.value),placeholder:"검색어 입력",className:"flex-1 outline-none"})]})}),e.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx(h,{columnKey:"name",title:"이름"}),e.jsx(h,{columnKey:"email",title:"이메일"}),e.jsx(h,{columnKey:"phone",title:"전화번호"}),e.jsx(h,{columnKey:"role",title:"권한"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"작업"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:q.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:t.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:t.email}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:t.phone}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${t.role==="admin"?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800"}`,children:t.role})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-2",children:[e.jsx("button",{onClick:()=>D(t),className:"p-2 text-gray-500 hover:text-blue-600 rounded-lg transition-all hover:scale-110",children:e.jsx(L,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>U(t),className:"p-2 text-gray-500 hover:text-red-600 rounded-lg transition-all hover:scale-110",children:e.jsx(O,{className:"w-4 h-4"})})]})]},t.id))})]})}),k&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-2xl p-8 max-w-lg w-full mx-4",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-6",children:i?"사용자 정보 수정":"새 사용자 추가"}),e.jsxs("form",{onSubmit:T,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"이름"}),e.jsx("input",{type:"text",name:"name",value:l.name,onChange:d,required:!0,className:"w-full p-3 border border-gray-200 rounded-xl"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"이메일"}),e.jsx("input",{type:"email",name:"email",value:l.email,onChange:d,required:!0,className:"w-full p-3 border border-gray-200 rounded-xl"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"전화번호"}),e.jsx("input",{type:"tel",name:"phone",value:l.phone,onChange:d,className:"w-full p-3 border border-gray-200 rounded-xl"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["비밀번호 ",i&&"(변경시에만 입력)"]}),e.jsx("input",{type:"password",name:"password",value:l.password,onChange:d,className:"w-full p-3 border border-gray-200 rounded-xl"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"권한"}),e.jsxs("select",{name:"role",value:l.role,onChange:d,className:"w-full p-3 border border-gray-200 rounded-xl bg-white",children:[e.jsx("option",{value:"user",children:"User"}),e.jsx("option",{value:"admin",children:"Admin"})]})]}),e.jsxs("div",{className:"flex space-x-3 mt-6",children:[e.jsx("button",{type:"button",onClick:N,className:"flex-1 py-3 px-4 border rounded-xl hover:bg-gray-50 font-medium transition-colors",children:"취소"}),e.jsx("button",{type:"submit",className:"flex-1 py-3 px-4 bg-blue-500 text-white rounded-xl hover:bg-blue-600 font-medium transition-colors",children:"저장"})]})]})]})}),m&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-2xl p-8 max-w-md w-full mx-4",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"사용자 삭제 확인"}),e.jsxs("p",{className:"text-gray-600 mb-6",children:["정말로 ",e.jsx("strong",{className:"text-red-600",children:m.name})," 사용자를 삭제하시겠습니까?"]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:()=>g(null),className:"flex-1 py-3 px-4 border rounded-xl hover:bg-gray-50 font-medium transition-colors",children:"취소"}),e.jsx("button",{onClick:E,className:"flex-1 py-3 px-4 bg-red-500 text-white rounded-xl hover:bg-red-600 font-medium transition-colors",children:"삭제"})]})]})})]})};export{H as default};
