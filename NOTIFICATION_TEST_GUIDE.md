# 📋 EmailJS + Slack 알림 통합 테스트 가이드

## 🚀 테스트 준비사항

### ✅ 확인 완료된 사항
- ✅ 개발 서버 실행 중: http://localhost:5173
- ✅ 환경변수 설정 완료 (.env.local)
- ✅ Firebase Functions 배포 완료
- ✅ 모든 의존성 설치 완료

### 📱 필요한 준비
1. **Slack 워크스페이스 준비**
   - `#알림` 채널이 존재하는지 확인
   - 봇이 메시지를 보낼 권한이 있는지 확인

2. **이메일 확인 준비**
   - 테스트 사용자 이메일: `testuser964419@gmail.com`
   - 이메일 수신함 확인 준비

## 🧪 테스트 시나리오 1: 대관 신청 → Slack 알림

### Step 1: 사용자 로그인
1. http://localhost:5173 접속
2. "로그인" 클릭
3. 이메일: `testuser964419@gmail.com`
4. 비밀번호: `964419Kun!`
5. 로그인 성공 확인

### Step 2: 대관 신청
1. "대관" 탭 클릭
2. 대관 신청 양식 작성:
   - **시설**: 체육관 A
   - **날짜**: 내일 날짜
   - **시간**: 14:00 - 16:00
   - **목적**: "Slack 알림 테스트"
   - **단체명**: "개발팀"
   - **인원**: 5명
   - **분류**: 동호회
3. "신청하기" 버튼 클릭
4. ✅ **성공 메시지 확인**: "대관 신청이 성공적으로 접수되었습니다"

### Step 3: Slack 알림 확인 🔔
**즉시 Slack #알림 채널 확인**
- 📝 **예상 메시지**: "📝 새로운 대관 신청"
- **포함 정보**:
  - 신청자: 테스트 사용자
  - 시설: 체육관 A
  - 일시: 선택한 날짜/시간
  - 목적: Slack 알림 테스트
  - 인원: 5명

## 🧪 테스트 시나리오 2: 관리자 승인 → Slack 알림

### Step 1: 관리자 로그인
1. 사용자 로그아웃
2. 관리자 로그인:
   - 이메일: `admin@flexspace.test`
   - 비밀번호: `FlexAdmin2025!`

### Step 2: 대관 승인
1. "관리자" 탭 클릭
2. 대관 관리 섹션에서 방금 신청한 항목 찾기
3. "승인" 버튼 클릭
4. ✅ **성공 메시지 확인**: "대관이 승인되었습니다"

### Step 3: Slack 알림 확인 🔔
**즉시 Slack #알림 채널 확인**
- ✅ **예상 메시지**: "✅ 대관 승인 알림"
- **포함 정보**:
  - 신청자: 테스트 사용자
  - 시설: 체육관 A
  - 상태: pending → approved

## 🧪 테스트 시나리오 3: 프로그램 신청 → Slack 알림

### Step 1: 사용자로 프로그램 신청
1. 사용자로 재로그인
2. "프로그램" 탭 클릭
3. 첫 번째 프로그램 "신청하기" 클릭
4. ✅ **성공 메시지 확인**

### Step 2: Slack 알림 확인 🔔
- 🎯 **예상 메시지**: "🎯 새로운 프로그램 신청"

### Step 3: 관리자 승인 및 알림 확인
1. 관리자로 로그인
2. 프로그램 신청 승인
3. Slack에서 승인 알림 확인
- ✅ **예상 메시지**: "✅ 프로그램 승인 알림"

## 🔍 문제 해결 가이드

### Slack 알림이 오지 않는 경우
1. **환경변수 확인**:
   ```bash
   # .env.local 확인
   SLACK_WEBHOOK_URL=https://hooks.slack.com/services/******xW1P
   SLACK_CHANNEL=#알림
   ```

2. **Firebase Functions 로그 확인**:
   ```bash
   firebase functions:log
   ```

3. **브라우저 개발자 도구 확인**:
   - Console 탭에서 에러 메시지 확인
   - Network 탭에서 API 호출 확인

### EmailJS 이메일이 오지 않는 경우
1. **환경변수 확인**:
   ```bash
   # .env.local 확인
   VITE_EMAILJS_SERVICE_ID=service_9ctjyxp
   VITE_EMAILJS_TEMPLATE_ID=template_1c7i9wc
   VITE_EMAILJS_PUBLIC_KEY=OXPWFax-iX7zQdkDe
   ```

2. **EmailJS 대시보드 확인**:
   - 서비스 ID, 템플릿 ID가 올바른지 확인
   - API 사용량 제한 확인

## 📊 성공 기준

### ✅ 모든 테스트 통과 시
1. **Slack 알림 4개 도착**:
   - 📝 대관 신청 알림
   - ✅ 대관 승인 알림
   - 🎯 프로그램 신청 알림
   - ✅ 프로그램 승인 알림

2. **이메일 알림 2개 도착**:
   - 대관 승인 이메일
   - 프로그램 승인 이메일

3. **브라우저 콘솔**:
   - ✅ 성공 로그: "Slack 알림 전송 성공"
   - ✅ 성공 로그: "EmailJS 전송 성공"

## 🎯 다음 단계

테스트 완료 후:
1. **실제 사용자 대상 베타 테스트**
2. **알림 메시지 내용 개선**
3. **추가 알림 채널 확장** (SMS, Discord 등)
4. **알림 설정 사용자 커스터마이징**

---

## 🚨 긴급 문제 발생 시

문제가 발생하면 다음 로그를 확인:
1. **브라우저 콘솔**: F12 → Console
2. **Firebase Functions**: `firebase functions:log`
3. **개발 서버**: npm run dev 터미널 출력
4. **네트워크**: F12 → Network → XHR/Fetch